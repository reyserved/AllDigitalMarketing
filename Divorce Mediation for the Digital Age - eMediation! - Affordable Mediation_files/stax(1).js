/*! For license information please see fattmerchant.js.LICENSE.txt */
(()=>{var e={686:e=>{e.exports=function(e){if(Array.isArray(e))return e}},480:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},579:e=>{function t(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,c,"next",e)}function c(e){t(a,i,o,s,c,"throw",e)}s(void 0)}))}}},606:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},784:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},960:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},440:(e,t,n)=>{n(917);var r=n(344);function i(t,n,o){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},i(t,n,o||t)}e.exports=i},917:e=>{function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},454:(e,t,n)=>{var r=n(641);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},17:e=>{e.exports=function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},591:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},263:(e,t,n)=>{var r=n(963),i=n(480);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},641:e=>{function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},820:(e,t,n)=>{var r=n(686),i=n(17),o=n(591);e.exports=function(e,t){return r(e)||i(e,t)||o()}},344:(e,t,n)=>{var r=n(917);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},963:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(r){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n},467:(e,t,n)=>{e.exports=n(161)},105:()=>{Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}},994:(e,t,n)=>{"use strict";n.r(t);var r,i,o,a,s,c,u,l,d,f,p,m,h,v,y,b,g,w=n(963),k=n.n(w);r=function(){function e(e){if(!a.test(e))throw Error();e=e.split(".");for(var t=window,n=0;n<e.length;n++)t=t[e[n]];return t}function t(e,t){return"string"==typeof e&&"string"==typeof t&&e.length>=t.length&&e.substr(0,t.length)===t}var n=/^\/\//,r=/^[^:]+:/,i=/^https?:\/\/[^\/]+/,o=/ (?:MSIE |Trident\/7\.0;.* rv:)(\d+)/,a=/^[^.]+(?:\.[^.]+)*$/;return{ja:function(e){var t;try{null==(t=document.getElementById(e))&&(t=document.getElementsByName(e)[0])}catch(e){}if(null==t)for(var n=0;n<document.forms.length;n++)for(var r=document.forms[n],i=0;i<r.elements.length;i++){var o=r[i];if(o.name===e||o.id===e)return o}return t},startsWith:t,N:function(t){for(var n=0;n<t.length;n++)try{var r=e(t[n]);if(r)return r}catch(e){}return""},a:e,aa:function(e){return n.test(e)&&(e=document.URL.match(r)[0]+e),!((e=e.match(i))&&!t(document.URL,e[0]))},P:function(){var e=navigator.userAgent.match(o);return e?parseInt(e[1],10):null},R:function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},ba:function(e,t,n){function r(){e.onreadystatechange=null,null!==s&&(clearTimeout(s),s=null),c=!0}var i=!1,o=!1,a=!1,s=null,c=!1;try{e.onreadystatechange=function(){c||4!==e.readyState||(r(),e=null,n(o,a))},0!==t&&(s=setTimeout((function(){c||(o=!0,r(),e.abort(),e=null,n(o,a))}),t)),e.send(),i=!0}catch(t){a=!0,r(),e=null}finally{i||n(o,a)}},S:function(e,t,n,r){for(t="boolean"==typeof r&&r?e.split(t):-1===(r=e.indexOf(t))?[e]:[e.substring(0,r),e.substring(r+t.length)],e=t[0],r=1;r<t.length;r++)e+=n+t[r];return e},ob:function(e){if(!e)return 0;if(Array.prototype.reduce)return e.split("").reduce((function(e,t){return 0|(e<<5)-e+t.charCodeAt(0)}),0);for(var t=0,n=0,r=e.length;n<r;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t},U:function(e){return 0<=window.navigator.userAgent.indexOf(e)}}}(),i=function(e){e=("0000000"+((e/1e3|0)>>>0).toString(16)).slice(-8)+"-";for(var t=9;36>t;t++){var n;13===t||18===t||23===t?n="-":14===t?n="4":(n=16*Math.random()|0,19===t&&(n=3&n|8),n=n.toString(16)),e+=n}return e},a=function e(){function t(e,t,n){if(0===o)for(o=e,i=n;t.length;)t.shift().call(c,n)}function n(e,t){setTimeout((function(){try{var n=t.call(null,i);n instanceof Object&&n.then&&n.then instanceof Function?n.then(e.O,e.reject):e.O(n)}catch(t){e.reject(t)}}),0)}function r(e,t,r){o===r?n(e,t):(1===r?a:s).push((function(){n(e,t)}))}var i,o=0,a=[],s=[],c=this;this.O=function(e){t(1,a,e)},this.reject=function(e){t(-1,s,e)},this.then=function(t,n){var i=new e;return t instanceof Function&&r(i,t,1),n instanceof Function&&r(i,n,-1),i}},s={xb:g=function(e){function t(){null!==s&&(clearTimeout(s),s=null);try{"function"==typeof e.finish&&e.finish(n)}catch(e){}r=!0,i.O()}var n,r=!1,i=new a,o=!1,s=null,c=!1;n={g:function(){return r},b:function(){r||t()},va:function(e){i.then((function(){e()}))},pa:function(){r||(o=!0,t())},da:function(){return o},Pb:function(){return c}},0<e.v&&(s=setTimeout((function(){s=null,r||(c=!0,t())}),e.v));try{e.start(n)}catch(e){n.b()}return n},ub:function(e){var t=[];return{start:function(n){for(var r=0;r<e.length;r++)t.push(g(e[r]));if(t.length){var i=t.length,o=function(){!n.g()&&0<i&&0==--i&&n.b()};for(r=0;r<t.length;r++)t[r].va(o)}else n.b()},finish:function(e){if(e.da())for(e=0;e<t.length;e++)t[e].pa()}}}},c=function(e,t){var n,r,i;return n=3,i=null,r="",{o:function(){var o=t.j[5],a=null;return{start:function(s){n=3,i=null,r="";var c=!1;try{var u=function(t){if(!t)return n=4,null;if(t=!e.aa(t)){var r=e.P();if(null!==r&&10>r)return n=8,null}return t}(o);if(null!==u){try{a=e.R()}catch(e){return void(n=9)}try{a.open("GET",o,!0)}catch(e){return void(n=1)}e.ba(a,t.l,(function(e,t){try{if(!s.g())if(e)n=2;else if(t)n=6;else{var o=a;n=o.status,200===o.status&&((r=o.getResponseHeader("ETag")||"")?r=r.replace(/"/g,""):n=7),r&&(i=u)}}catch(e){n=6}finally{s.b()}})),c=!0}}catch(e){n=6}finally{c||s.b()}},finish:function(e){e.da()&&(n=5),a=null}}},Za:function(){return r},Z:function(){return i},$:function(){return n}}}(r,o={j:[],X:[],l:9e3,K:null,ca:[],J:null,vb:"@_PAYLOADINPUTID_@"}),u=function(e,t){var n=null;return{o:function(){return{start:function(r){try{var i,o=t.j[1],a=t.j[2];o&&a?function(n,r){!function(t){return!e.aa(t)&&(8===(t=e.P())||9===t)}(n)?((i=e.R()).open("POST",n,!0),e.ba(i,t.l,(function(){r(200===i.status)}))):((i=new XDomainRequest).open("POST",n),function(e,t,n){function r(){e&&!o&&(e.onload=e.onerror=e.ontimeout=null,o=!0),e=null,n(i)}var i=!1,o=!1,a=!1;try{e.onload=function(){i=!0,r()},e.onerror=e.ontimeout=r,e.timeout=t,e.send(),a=!0}catch(e){}finally{a||r()}}(i,t.l,r))}(o,(function(t){var o=new Date;if(!r.g()){try{if(t&&i.responseText){var s=i.responseText.replace(/[^ -~](?:.|\n)*/,"");e.ja(a).value=s,n=o}}catch(e){}r.b()}})):r.b()}catch(e){r.b()}}}},Xa:function(){return n}}}(r,o),b={h:[],T:[],wa:function(e){return{Ca:e,W:[],zb:function(e,t){for(var n=0;n<t.length;n++)this.W[e+n]=t[n]},sa:function(e){this.zb(this.W.length,e)},L:function(){for(var e=this.W,t=this.Ca.toString(),n=0;n<e.length;n++)try{var r=t+="&",i=""+e[n](),o="",a=/[%&]+/g,s=void 0,c=0;for(s=a.exec(i);null!==s;)o+=i.substring(c,s.index)+encodeURIComponent(s[0]),c=a.lastIndex,s=a.exec(i);t=r+(o+=i.substring(c))}catch(e){}return t}}}},l=function(e,t){var n=!1,r=!1;return{La:function(){return{start:function(e){n=!1;try{(window.requestFileSystem||window.webkitRequestFileSystem)(0,0,(function(){e.b()}),(function(){e.g()||(n=!0,e.b())}))}catch(t){e.b()}},v:t.l}},Ja:function(){var e,n=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;return{start:function(t){r=!1;try{(e=n.open("pbtest")).onsuccess=function(){if(!t.g())try{e.result.close()}finally{t.b()}},e.onerror=function(){t.g()||(r=!0,t.b())}}catch(e){t.b()}},finish:function(){e&&(e=e.onsuccess=e.onerror=null),n&&n.deleteDatabase("pbtest")},v:t.l}},Y:function(){var t;if(!(t=n||r))e:{if(t=window.localStorage)try{t.setItem("pbtest",1),t.removeItem("pbtest")}catch(e){t=!0;break e}t=!1}return t||window.indexedDB||(t=null!==(t=e.P())&&10<=t||e.U("Edge/")),t||(t=e.U("Focus/")),t}}}(r,o),d=function(e){var t=null;return{Ka:function(){var n,r=null;return{start:function(i){t=null;try{(n=document.createElement("div")).setAttribute("class","pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links adsbox"),n.setAttribute("style",e.S("width:1px;height:1px;position:absolute;left:-10000px;right:-1000px;",";","!important;",!0)),document.body.appendChild(n),r=setTimeout((function(){if(r=null,!i.g())try{t=!(n&&n.parentNode&&!n.getAttribute("abp")&&n.offsetParent&&0!==n.offsetWidth&&0!==n.offsetHeight&&0!==n.clientWidth&&0!==n.clientHeight)}finally{i.b()}}),100)}catch(e){i.b()}},finish:function(){n&&(n.parentNode&&n.parentNode.removeChild(n),n=null),null!==r&&(clearTimeout(r),r=null)}}},Y:function(){return t}}}(r),f=function(){function e(e){var t;return t=37>e?11>e?e?e+47:46:e+54:38>e?95:e+59,String.fromCharCode(t)}function t(t){function r(t){for(o=o<<t[0]|t[1],a+=t[0];6<=a;)i+=e(t=o>>a-6&63),o^=t<<(a-=6)}var i="",o=0,a=0;r([6,(7&t.length)<<3]),r([6,56&t.length|1]);for(var s=0;s<t.length;s++){if(void 0===n[t.charCodeAt(s)])return;r(n[t.charCodeAt(s)])}return r(n[0]),0<a&&r([6-a,0]),i}var n={1:[4,15],110:[8,239],74:[8,238],57:[7,118],56:[7,117],71:[8,233],25:[8,232],101:[5,28],104:[7,111],4:[7,110],105:[6,54],5:[7,107],109:[7,106],103:[9,423],82:[9,422],26:[8,210],6:[7,104],46:[6,51],97:[6,50],111:[6,49],7:[7,97],45:[7,96],59:[5,23],15:[7,91],11:[8,181],72:[8,180],27:[8,179],28:[8,178],16:[7,88],88:[10,703],113:[11,1405],89:[12,2809],107:[13,5617],90:[14,11233],42:[15,22465],64:[16,44929],0:[16,44928],81:[9,350],29:[8,174],118:[8,173],30:[8,172],98:[8,171],12:[8,170],99:[7,84],117:[6,41],112:[6,40],102:[9,319],68:[9,318],31:[8,158],100:[7,78],84:[6,38],55:[6,37],17:[7,73],8:[7,72],9:[7,71],77:[7,70],18:[7,69],65:[7,68],48:[6,33],116:[6,32],10:[7,63],121:[8,125],78:[8,124],80:[7,61],69:[7,60],119:[7,59],13:[8,117],79:[8,116],19:[7,57],67:[7,56],114:[6,27],83:[6,26],115:[6,25],14:[6,24],122:[8,95],95:[8,94],76:[7,46],24:[7,45],37:[7,44],50:[5,10],51:[5,9],108:[6,17],22:[7,33],120:[8,65],66:[8,64],21:[7,31],106:[7,30],47:[6,14],53:[5,6],49:[5,5],86:[8,39],85:[8,38],23:[7,18],75:[7,17],20:[7,16],2:[5,3],73:[8,23],43:[9,45],87:[9,44],70:[7,10],3:[6,4],52:[5,1],54:[5,0]},r="%20 ;;; %3B %2C und fin ed; %28 %29 %3A /53 ike Web 0; .0 e; on il ck 01 in Mo fa 00 32 la .1 ri it %u le".split(" ");return{fa:function(n){for(var i=n,o=0;r[o];o++)i=i.split(r[o]).join(String.fromCharCode(o+1));if(void 0===(i=t(i)))return n;o=65535;for(var a=0;a<n.length;a++)o=65535&(o>>>8|o<<8),o^=255&n.charCodeAt(a),o^=(255&o)>>4,o^=o<<12&65535,o^=(255&o)<<5&65535;return n=""+e((o&=65535)>>>12),i+((n+=e(o>>>6&63))+e(63&o))}}}(),p=function(e){function t(){p||(p=d);try{isNaN(screen.logicalXDPI)||isNaN(screen.systemXDPI)?window.navigator.msMaxTouchPoints?p=u:!window.chrome||window.opera||e.U(" Opera")?0<=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")?p=s:"orientation"in window&&"webkitRequestAnimationFrame"in window?p=a:"webkitRequestAnimationFrame"in window?p=o:e.U("Opera")?p=n:window.devicePixelRatio?p=r:.001<i().zoom&&(p=i):p=c:p=l}catch(e){}return p()}function n(){var e=window.top.outerWidth/window.top.innerWidth;return{zoom:e=Math.round(100*e)/100,i:e*f()}}function r(){return{zoom:i().zoom,i:f()}}function i(){var e=function(){var e,t,n,r;window.matchMedia?e=window.matchMedia:(t=document.getElementsByTagName("head")[0],n=document.createElement("style"),t.appendChild(n),(r=document.createElement("div")).className="mediaQueryBinarySearch",r.style.display="none",document.body.appendChild(r),e=function(e){return n.sheet.insertRule("@media "+e+"{.mediaQueryBinarySearch {text-decoration: underline} }",0),e="underline"===getComputedStyle(r,null).textDecoration,n.sheet.deleteRule(0),{matches:e}});var i=function t(n,r,i){var o=(n+r)/2;return 0>=i||1e-4>r-n?o:e("(min--moz-device-pixel-ratio:"+o+")").matches?t(o,r,i-1):t(n,o,i-1)}(0,10,20);return r&&(t.removeChild(n),document.body.removeChild(r)),i}();return{zoom:e=Math.round(100*e)/100,i:e}}function o(){var e=document.createElement("div");e.innerHTML="1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0",e.setAttribute("style","font: 100px/1em sans-serif; -webkit-text-size-adjust: none; text-size-adjust: none; height: auto; width: 1em; padding: 0; overflow: visible;".replace(/;/g," !important;"));var t=document.createElement("div");return t.setAttribute("style","width:0; height:0; overflow:hidden; visibility:hidden; position: absolute;".replace(/;/g," !important;")),t.appendChild(e),document.body.appendChild(t),e=1e3/e.clientHeight,e=Math.round(100*e)/100,document.body.removeChild(t),{zoom:e,i:e*f()}}function a(){var e=(90==Math.abs(window.orientation)?screen.height:screen.width)/window.innerWidth;return{zoom:e,i:e*f()}}function s(){var e=Math.round(document.documentElement.clientWidth/window.innerWidth*100)/100;return{zoom:e,i:e*f()}}function c(){var e=Math.round(window.outerWidth/window.innerWidth*100)/100;return{zoom:e,i:e*f()}}function u(){var e=Math.round(document.documentElement.offsetHeight/window.innerHeight*100)/100;return{zoom:e,i:e*f()}}function l(){var e=Math.round(screen.deviceXDPI/screen.logicalXDPI*100)/100;return{zoom:e,i:e*f()}}function d(){return{zoom:1,i:1}}function f(){return window.devicePixelRatio||1}var p;return{zoom:function(){return t().zoom},M:function(){return t().i}}}(r),m=function(){var e,t={Flash:["ShockwaveFlash.ShockwaveFlash",function(e){return e.getVariable("$version")}],Director:["SWCtl.SWCtl",function(e){return e.ShockwaveVersion("")}]};try{void 0!==(e=document.createElement("span")).addBehavior&&e.addBehavior("#default#clientCaps")}catch(e){}var n={};return{f:function(t){var n="";try{void 0!==e.getComponentVersion&&(n=e.getComponentVersion(t,"ComponentID"))}catch(e){t=e.message.length,n=escape(e.message.substr(0,40<t?40:t))}return n},s:function(e){return n[e]},Oa:function(){for(var e="Acrobat;Flash;QuickTime;Java Plug-in;Director;Office".split(";"),r=0;r<e.length;r++){var i=a=e[r],o=a,a="";try{if(navigator.plugins&&navigator.plugins.length){var s=new RegExp(o+".* ([0-9._]+)");for(o=0;o<navigator.plugins.length;o++){var c=s.exec(navigator.plugins[o].name);null===c&&(c=s.exec(navigator.plugins[o].description)),c&&(a=c[1])}}else if(window.ActiveXObject&&t[o])try{var u=new ActiveXObject(t[o][0]);a=t[o][1](u)}catch(e){a=""}}catch(e){a=e.message}n[i]=a}},c:function(e){try{if(navigator.plugins&&navigator.plugins.length)for(var t=0;t<navigator.plugins.length;t++){var n=navigator.plugins[t];if(0<=n.name.indexOf(e))return n.name+(n.description?"|"+n.description:"")}}catch(e){}return""},bb:function(){var e="";if(navigator.plugins&&navigator.plugins.length)for(var t=0;t<navigator.plugins.length;t++){var n=navigator.plugins[t];n&&(e+=n.name+n.filename+n.description+n.version)}return e}}}(),h=function(e,t){function n(t){o=t.status;var n=["","",""];try{c=t.getResponseHeader("cache-control");for(var r=t.getAllResponseHeaders().toLowerCase().split("\n"),i=["warning","x-cache","via"],s=0;s<i.length;s++)for(var f=0;f<r.length;f++)if(e.startsWith(r[f],i[s]+":")){n[s]=t.getResponseHeader(i[s]);break}}catch(e){}u=n[0],l=n[1],d=n[2],200===t.status&&((t=t.getResponseHeader("Last-Modified"))||((t=(void 0).getResponseHeader("Expires"))?((t=new Date(t)).setTime(t.getTime()-31536e6),t=t.toUTCString()):t=void 0),(a=t||"")||(o=7))}function r(t){if(!t)return o=4,null;if(t=!e.aa(t)){var n=e.P();if(null!==n&&10>n)return o=8,null}return t}function i(){o=3,s=null,a=c=u=l=d=""}var o,a,s,c,u,l,d;return i(),{o:function(){var c=t.j[0],u=null;return{start:function(l){i();var d=!1;try{var f=r(c);if(null!==f){try{u=e.R()}catch(e){return void(o=9)}try{u.open("GET",c,!0)}catch(e){return void(o=1)}e.ba(u,t.l,(function(e,t){try{l.g()||(e?o=2:t?o=6:(n(u),a&&(s=f)))}catch(e){o=6}finally{l.b()}})),d=!0}}catch(e){o=6}finally{d||l.b()}},finish:function(e){e.da()&&(o=5),u=null}}},Ab:function(){try{var c=t.j[0];i();var u=r(c);if(null!==u){var l;try{l=e.R()}catch(e){return void(o=9)}try{l.open("GET",c,!1)}catch(e){return void(o=1)}l.send(),n(l),a&&(s=u)}}catch(e){o=6}},$a:function(){return a},Z:function(){return s},$:function(){return o},Wa:function(){return c},lb:function(){return u},nb:function(){return l},kb:function(){return d}}}(r,o),v=function(){function e(e){n=new Date(e.getTime()),r=t(1),i=t(7)}function t(e){e--;var t=n.getTime(),r=n.getFullYear(),i=new Date(r,e,15),o=i,a=i;return i.getTime()<=t?a=new Date(r+1,e,15):o=new Date(r-1,e,15),(t-o.getTime()<a.getTime()-t?o:a).getTimezoneOffset()}var n,r,i;return e(new Date),{yb:e,mb:function(){return r},hb:function(){return i},rb:function(){return i!==r},qb:function(){return i!==r&&n.getTimezoneOffset()===Math.min(r,i)},gb:function(){return Math.max(r,i)}}}(),y=function(e){function t(e){return void 0!==navigator.userAgentData&&"function"==typeof e?e.apply(this):""}var n={platform:"",platformVersion:"",architecture:"",model:"",uaFullVersion:"",bitness:"",fullVersionList:""};return{Ha:void 0!==navigator.userAgentData,sb:function(){return t((function(){try{return navigator.userAgentData.mobile}catch(e){return""}}))},ia:function(){return t((function(){try{return function(){for(var t=navigator.userAgentData.brands,n=0;n<t.length;n++)switch(t[n].brand){case e.B:return e.B.replace("Google ","");case e.G:return e.G;case e.D:return e.D.replace("Microsoft ","");case e.I:return e.I;case e.w:return e.w;case e.A:return e.A;case e.C:return e.C;case e.H:return e.H;case e.F:return e.F}return e.V}()}catch(e){return""}}))},Va:function(){return t((function(){try{var t;e:{for(var n=navigator.userAgentData.brands,r=0,i=0,o=0;o<n.length;o++){switch(n[o].brand){case e.B:case e.G:case e.D:case e.I:case e.w:case e.A:case e.C:case e.H:case e.F:r=n[o].version;break;case e.V:i=n[o].version}if(0!==r){t=r;break e}}t=0!==i?i:n[0].version}return t}catch(e){return""}}))},Na:function(){return{start:function(e){try{void 0!==navigator.userAgentData?navigator.userAgentData.getHighEntropyValues(Object.keys(n)).then((function(t){e.g()||(n=t,e.b())})):e.b()}catch(t){e.b()}}}},na:function(){return n.platform},oa:function(){return n.platformVersion},ga:function(){return n.architecture},ma:function(){return n.model},ka:function(){var t;e:if(t=n.fullVersionList,null==t||0===t.length)t=n.uaFullVersion;else{for(var r=0,i=0,o=0;o<t.length;o++){switch(t[o].brand){case e.B:case e.G:case e.D:case e.I:case e.w:case e.A:case e.C:case e.H:case e.F:r=t[o].version;break;case e.V:i=t[o].version}if(0!==r){t=r;break e}}t=0!==i?i:t[0].version}return t},ha:function(){return n.bitness},la:function(){return""===n.fullVersionList?n.fullVersionList:JSON.stringify(n.fullVersionList)}}}({B:"Google Chrome",V:"Chromium",G:"Opera",D:"Microsoft Edge",I:"Vivaldi",w:"Blisk",A:"Brave",C:"Colibri",H:"SamsungBrowser",F:"HuaweiBrowser"}),d=function(e,t,n,r,i,o,a,s,c,u,l,d){function f(e){m(),e=e||i.vb;try{if(!e)return v();var t;if(null==(t=n.ja(e)))return v();try{var r=v();return t.value=r}catch(e){t.value=escape(e.message)}}catch(e){}}function p(e,t){m();var n=Math.random()+1&&["https://globalsiteanalytics.com/resource/resource.png","https://globalsiteanalytics.com/service/hdim","sign"];for(i.j=t||("string"!=typeof n?n:[]),h(i.X,e),n=0;n<i.ca.length;n++)i.ca[n]()}function m(){i.K&&(i.K.pa(),i.K=null)}function h(e,t){for(var n=[],r=0;r<e.length;r++)try{n.push(e[r]())}catch(e){}n=c.ub(n),n=c.xb(n),"function"==typeof t&&n.va(t),i.K=n}function v(){b=new Date,u.yb(b),a.Oa();for(var e="",n=0;n<o.h.length;n++){var r;try{r=o.h[n]()}catch(e){r=""}e+=escape(r),e+=";"}for(e+=escape(i.J.L())+";",n=0;n<o.T.length;n++)e=o.T[n](e);return g?t.fa(e):e}function y(e){return function(){return e}}var b,g=!0,w={},k="",_=y("");return i.J=new o.wa(3),i.J.sa([function(){return k},function(){return s.Wa()},function(){return s.lb().replace(/ *(\d{3}) [^ ]*( "[^"\\]*(\\(.|\n)[^"\\]*)*"){1,2} */g,(function(e,t){return t}))},function(){return s.nb()},function(){return s.kb()},function(){var t=e.Y();return"boolean"==typeof t?0+t:""},function(){return n.a("devicePixelRatio")},function(){return Math.round(window.screen.width*r.M())},function(){return Math.round(window.screen.height*r.M())},function(){return n.a("screen.left")},function(){return n.a("screen.top")},function(){return n.a("innerWidth")},function(){return n.a("outerWidth")},function(){return r.zoom().toFixed(2)},function(){return n.a("navigator.languages")}]),o.h=[y("TF1"),y("030"),function(){return ScriptEngineMajorVersion()},function(){return ScriptEngineMinorVersion()},function(){return ScriptEngineBuildVersion()},function(){return a.f("{7790769C-0471-11D2-AF11-00C04FA35D02}")},function(){return a.f("{89820200-ECBD-11CF-8B85-00AA005B4340}")},function(){return a.f("{283807B5-2C60-11D0-A31D-00AA00B92C03}")},function(){return a.f("{4F216970-C90C-11D1-B5C7-0000F8051515}")},function(){return a.f("{44BBA848-CC51-11CF-AAFA-00AA00B6015C}")},function(){return a.f("{9381D8F2-0288-11D0-9501-00AA00B911A5}")},function(){return a.f("{4F216970-C90C-11D1-B5C7-0000F8051515}")},function(){return a.f("{5A8D6EE0-3E18-11D0-821E-444553540000}")},function(){return a.f("{89820200-ECBD-11CF-8B85-00AA005B4383}")},function(){return a.f("{08B0E5C0-4FCB-11CF-AAA5-00401C608555}")},function(){return a.f("{45EA75A0-A269-11D1-B5BF-0000F8051515}")},function(){return a.f("{DE5AED00-A4BF-11D1-9948-00C04F98BBC9}")},function(){return a.f("{22D6F312-B0F6-11D0-94AB-0080C74C7E95}")},function(){return a.f("{44BBA842-CC51-11CF-AAFA-00AA00B6015B}")},function(){return a.f("{3AF36230-A269-11D1-B5BF-0000F8051515}")},function(){return a.f("{44BBA840-CC51-11CF-AAFA-00AA00B6015C}")},function(){return a.f("{CC2A9BA0-3BDD-11D0-821E-444553540000}")},function(){return a.f("{08B0E5C0-4FCB-11CF-AAA5-00401C608500}")},function(){return n.a("navigator.appCodeName")},function(){return n.a("navigator.appName")},function(){return n.a("navigator.appVersion")},function(){return n.N(["navigator.productSub","navigator.appMinorVersion"])},function(){return n.a("navigator.browserLanguage")},function(){return n.a("navigator.cookieEnabled")},function(){return n.N(["navigator.oscpu","navigator.cpuClass"])},_,function(){return n.a("navigator.platform")},function(){return n.a("navigator.systemLanguage")},function(){return d.L()},function(){return n.N(["navigator.language","navigator.userLanguage"])},function(){return n.a("document.defaultCharset")},function(){return n.a("document.domain")},function(){return n.a("screen.deviceXDPI")},function(){return n.a("screen.deviceYDPI")},function(){return n.a("screen.fontSmoothingEnabled")},function(){return n.a("screen.updateInterval")},function(){return u.rb()},function(){return u.qb()},function(){return"@UTC@"},function(){return-u.gb()/60},function(){return new Date(2005,5,7,21,33,44,888).toLocaleString().replace(/\u200e/g,"")},function(){return n.a("screen.width")},function(){return n.a("screen.height")},function(){return a.s("Acrobat")},function(){return a.s("Flash")},function(){return a.s("QuickTime")},function(){return a.s("Java Plug-in")},function(){return a.s("Director")},function(){return a.s("Office")},function(){return"@CT@"},function(){return u.mb()},function(){return u.hb()},function(){return b.toLocaleString().replace(/\u200e/g,"")},function(){return n.a("screen.colorDepth")},function(){return n.a("screen.availWidth")},function(){return n.a("screen.availHeight")},function(){return n.a("screen.availLeft")},function(){return n.a("screen.availTop")},function(){return a.c("Acrobat")},function(){return a.c("Adobe SVG")},function(){return a.c("Authorware")},function(){return a.c("Citrix ICA")},function(){return a.c("Director")},function(){return a.c("Flash")},function(){return a.c("MapGuide")},function(){return a.c("MetaStream")},function(){return a.c("PDF Viewer")},function(){return a.c("QuickTime")},function(){return a.c("RealOne")},function(){return a.c("RealPlayer Enterprise")},function(){return a.c("RealPlayer Plugin")},function(){return a.c("Seagate Software Report")},function(){return a.c("Silverlight")},function(){return a.c("Windows Media")},function(){return a.c("iPIX")},function(){return a.c("nppdf.so")},function(){var e=document.createElement("span");e.innerHTML="&nbsp;",e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);var t=e.offsetHeight;return document.body.removeChild(e),t},_,_,_,_,_,_,_,_,_,_,_,_,_,_,function(){return"7.3.0"},_,function(){return s.$a()},_,_,_,_,_,function(){var e=s.Z();return"boolean"==typeof e?0+e:""},function(){return s.$()},function(){return"0"},_,_,_,_,function(){return(n.ob(a.bb())>>>0).toString(16)+""},function(){return n.N(["navigator.doNotTrack","navigator.msDoNotTrack"])},_,_,_,_,_,_,function(){return l.sb()},function(){return l.ia()},function(){return l.Va()},function(){return l.na()},function(){return l.oa()},function(){return l.ga()},function(){return l.ma()},function(){return l.ka()},function(){return l.ha()},function(){return l.la()}],o.T=[function(e){return n.S(e,escape("@UTC@"),(new Date).getTime())},function(e){return n.S(e,escape("@CT@"),(new Date).getTime()-b.getTime())}],i.X.push(s.o,(function(){return{start:function(e){k="";try{navigator.getBattery().then((function(t){e.g()||(k=[t.charging,t.chargingTime,t.dischargingTime,t.level].join(),e.b())}))}catch(t){e.b()}},v:i.l}}),e.Ka,l.Na),w.validate=f,w.f1b5=t.fa,w.initiate=p,w.zil=function(e,t,n){m(),i.j=[e],2<arguments.length?h([s.o],n):s.Ab()},function(e){var t=(e=e||{}).ctx||window;return g=!e.hasOwnProperty("compress")||e.compress,t.ppp=w,g&&(e=navigator.userAgent.toLowerCase(),"Gecko"===navigator.product&&2>=parseInt(e.substring(e.indexOf("rv:")+3,e.indexOf(")",e.indexOf("rv:")+3)).split(".")[0],10)&&f()),{L:f,Ob:p}}}(d,f,r,p,o,b,m,h,s,v,y,function(e,t,n,r,i){return{L:function(){if(!e.Ha)return t.a("navigator.userAgent");if((o=new i).ua(t.a("navigator.userAgent")),null===(o=o.eb()).qa.version||null===o.ta.version||null===o.ea.version)return t.a("navigator.userAgent");var o,a={Da:e.ga(),platform:e.na(),wb:e.oa(),Ga:e.ia(),Qa:e.ka(),tb:e.ma(),Ea:e.ha(),Hb:e.la()};return-1<(a=(o=r.Ra(a,o)).CH_platform).toLowerCase().indexOf("macos")||-1<a.toLowerCase().indexOf("mac os")?r.u(n.ya,o):-1<a.toLowerCase().indexOf("windows")?r.u(n.Ba,o):-1<a.toLowerCase().indexOf("android")?(o.CH_platformVersion=r.Pa(o.CH_platformVersion),r.u(n.za,o)):-1<a.toLowerCase().indexOf("iphone")||-1<a.toLowerCase().indexOf("ipod")||-1<a.toLowerCase().indexOf("ipad")||-1<a.toLowerCase().indexOf("ios")?t.a("navigator.userAgent"):-1<a.toLowerCase().indexOf("linux")?r.u(n.xa,o):r.u(n.Aa,o)}}}(y,r,{ya:"Mozilla/{{Mozilla_version}} (Macintosh; {{CH_architecture}} Mac OS X {{CH_platformVersion}}) AppleWebKit/{{AppleWebKit_version}} (KHTML, like Gecko) {{CH_BrowserName}}/{{CH_UAFullVersion}} Safari/{{Safari_version}}",Ba:"Mozilla/{{Mozilla_version}} ({{CH_platform}} NT {{CH_platformVersion}}; {{CH_architecture}}) AppleWebKit/{{AppleWebKit_version}} (KHTML, like Gecko) {{CH_BrowserName}}/{{CH_UAFullVersion}} Safari/{{Safari_version}}",za:"Mozilla/{{Mozilla_version}} (Linux; {{CH_platform}} {{CH_platformVersion}}; {{CH_model}}) AppleWebKit/{{AppleWebKit_version}} (KHTML, like Gecko) {{CH_BrowserName}}/{{CH_UAFullVersion}} Mobile Safari/{{Safari_version}}",Bb:"Mozilla/{{Mozilla_version}} ({{CH_model}}; {{CH_architecture}} {{CH_platform}} {{CH_platformVersion}}) AppleWebKit/{{AppleWebKit_version}} (KHTML, like Gecko) {{CH_BrowserName}}/{{CH_UAFullVersion}} Mobile Safari/{{Safari_version}}",xa:"Mozilla/{{Mozilla_version}} (X11; {{CH_platform}} {{CH_platformVersion}}; {{CH_architecture}}_{{CH_bitness}}) AppleWebKit/{{AppleWebKit_version}} (KHTML, like Gecko) {{CH_BrowserName}}/{{CH_UAFullVersion}} Safari/{{Safari_version}}",Aa:"Mozilla/{{Mozilla_version}} ({{CH_platform}} {{CH_platformVersion}}; {{CH_model}} {{CH_architecture}}) AppleWebKit/{{AppleWebKit_version}} (KHTML, like Gecko) {{CH_BrowserName}}/{{CH_UAFullVersion}} Safari/{{Safari_version}}"},{u:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e=e.replace("{{"+n+"}}",t[n]));return e},Ra:function(e,t){var n=e.Da,r=e.platform,i=e.wb,o=e.Ga,a=e.Qa,s=e.tb,c=e.Ea,u=t.qa.version,l=t.ea.version,d=t.ta.version;return null!=u&&""!==u||(u="5.0"),null!=l&&""!==l||(l="537.36"),null!=d&&""!==d||(d="537.36"),null!=r&&""!==r||(r=t.ra.name),null!=i&&""!==i||(i=t.ra.version),null!=a&&""!==a||(a=t.Fa.version),null!=s&&""!==s||(s=t.M.model),{CH_architecture:n,CH_platform:r,CH_platformVersion:i,CH_BrowserName:o,CH_UAFullVersion:a,CH_model:s,CH_bitness:c,Mozilla_version:u,AppleWebKit_version:l,Safari_version:d}},Pa:function(e){var t=+(i=e.match(/\d*\.|\d+/g)||[])[0]||0,n=+i[1]||0,r=+i[2]||0,i=+i[3]||0;return 8>=t?e:e=(i?[t,n,r,i]:r?[t,n,r]:n?[t,n]:[t]).join(".")}},function(){function e(e){var t=e||("undefined"!=typeof window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"");return this.Ua=function(){var e={name:null,version:null};return n.call(e,t,o),e},this.Ya=function(){var e={vendor:null,model:null,type:null};return n.call(e,t,a),e},this.ab=function(){var e={name:null,version:null};return n.call(e,t,c),e},this.Ta=function(){var e={name:null,version:null};return n.call(e,t,s),e},this.fb=function(){var e={name:null,version:null};return n.call(e,t,u),e},this.cb=function(){var e={name:null,version:null};return n.call(e,t,l),e},this.eb=function(){return{Qb:this.ib(),Fa:this.Ua(),qa:this.ab(),ea:this.Ta(),ta:this.fb(),ra:this.cb(),M:this.Ya()}},this.ib=function(){return t},this.ua=function(e){t="string"==typeof e&&255<e.length?r(e,255):e},this.ua(t),this}function t(e,t){for(var n in t)if("object"===k()(t[n])&&0<t[n].length){for(var r=0;r<t[n].length;r++)if(i(t[n][r],e))return"?"===n?void 0:n}else if(i(t[n],e))return"?"===n?void 0:n;return e}function n(e,t){for(var n,r,i,o,a,s,c=0;c<t.length&&!a;){var u=t[c],l=t[c+1];for(n=r=0;n<u.length&&!a;)if(a=u[n].exec(e),n++,a)for(i=0;i<l.length;i++)s=a[++r],o=l[i],"object"===k()(o)&&0<o.length?2===o.length?this[o[0]]="function"==typeof o[1]?o[1].call(this,s):o[1]:3===o.length?this[o[0]]="function"!=typeof o[1]||o[1].exec&&o[1].test?s?s.replace(o[1],o[2]):void 0:s?o[1].call(this,s,o[2]):void 0:4===o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;c+=2}}function r(e,t){return"string"==typeof e?(e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),void 0===t?e:e.substring(0,255)):""}function i(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())}var o=[[/\b(?:crmo|crios)\/([\w\.]+)/i],["version",["name","Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],["version",["name","Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],["name","version"],[/opios[\/ ]+([\w\.]+)/i],["version",["name","Opera Mini"]],[/\bopr\/([\w\.]+)/i],["version",["name","Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],["name","version"],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],["version",["name","UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],["version",["name","WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],["version",["name","WeChat"]],[/konqueror\/([\w\.]+)/i],["version",["name","Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],["version",["name","IE"]],[/yabrowser\/([\w\.]+)/i],["version",["name","Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[["name",/(.+)/,"$1 Secure Browser"],"version"],[/\bfocus\/([\w\.]+)/i],["version",["name","Firefox Focus"]],[/\bopt\/([\w\.]+)/i],["version",["name","Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],["version",["name","Coc Coc"]],[/dolfin\/([\w\.]+)/i],["version",["name","Dolphin"]],[/coast\/([\w\.]+)/i],["version",["name","Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/fxios\/([-\w\.]+)/i],["version",["name","Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[["name","360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[["name",/(.+)/,"$1 Browser"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],["name","version"],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],["name"],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[["name","Facebook"],"version"],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],["name","version"],[/\bgsa\/([\w\.]+) .*safari\//i],["version",["name","GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],["version",["name","Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[["name","Chrome WebView"],"version"],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],["version",["name","Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],["name","version"],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],["version","name"],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],["name",["version",t,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[["name","Netscape"],"version"],[/mobile vr; rv:([\w\.]+)\).+firefox/i],["version",["name","Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],["name","version"]],a=[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],["model",["vendor","Samsung"],["type","tablet"]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],["model",["vendor","Samsung"],["type","mobile"]],[/\((ip(?:hone|od)[\w ]*);/i],["model",["vendor","Apple"],["type","mobile"]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],["model",["vendor","Apple"],["type","tablet"]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],["model",["vendor","Huawei"],["type","tablet"]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],["model",["vendor","Huawei"],["type","mobile"]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","tablet"]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],["model",["vendor","OPPO"],["type","mobile"]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],["model",["vendor","Vivo"],["type","mobile"]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],["model",["vendor","Realme"],["type","mobile"]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],["model",["vendor","Motorola"],["type","mobile"]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],["model",["vendor","Motorola"],["type","tablet"]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],["model",["vendor","LG"],["type","tablet"]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],["model",["vendor","LG"],["type","mobile"]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],["model",["vendor","Lenovo"],["type","tablet"]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[["model",/_/g," "],["vendor","Nokia"],["type","mobile"]],[/(pixel c)\b/i],["model",["vendor","Google"],["type","tablet"]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],["model",["vendor","Google"],["type","mobile"]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],["model",["vendor","Sony"],["type","mobile"]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[["model","Xperia Tablet"],["vendor","Sony"],["type","tablet"]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],["model",["vendor","OnePlus"],["type","mobile"]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[["model",/(.+)/g,"Fire Phone $1"],["vendor","Amazon"],["type","mobile"]],[/(playbook);[-\w\),; ]+(rim)/i],["model","vendor",["type","tablet"]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],["model",["vendor","ASUS"],["type","tablet"]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],["model",["vendor","ASUS"],["type","mobile"]],[/(nexus 9)/i],["model",["vendor","HTC"],["type","tablet"]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],["vendor",["model",/_/g," "],["type","mobile"]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],["model",["vendor","Acer"],["type","tablet"]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],["model",["vendor","Meizu"],["type","mobile"]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],["model",["vendor","Sharp"],["type","mobile"]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],["vendor","model",["type","mobile"]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],["vendor","model",["type","tablet"]],[/(surface duo)/i],["model",["vendor","Microsoft"],["type","tablet"]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],["model",["vendor","Fairphone"],["type","mobile"]],[/(u304aa)/i],["model",["vendor","AT&T"],["type","mobile"]],[/\bsie-(\w*)/i],["model",["vendor","Siemens"],["type","mobile"]],[/\b(rct\w+) b/i],["model",["vendor","RCA"],["type","tablet"]],[/\b(venue[\d ]{2,7}) b/i],["model",["vendor","Dell"],["type","tablet"]],[/\b(q(?:mv|ta)\w+) b/i],["model",["vendor","Verizon"],["type","tablet"]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],["model",["vendor","Barnes & Noble"],["type","tablet"]],[/\b(tm\d{3}\w+) b/i],["model",["vendor","NuVision"],["type","tablet"]],[/\b(k88) b/i],["model",["vendor","ZTE"],["type","tablet"]],[/\b(nx\d{3}j) b/i],["model",["vendor","ZTE"],["type","mobile"]],[/\b(gen\d{3}) b.+49h/i],["model",["vendor","Swiss"],["type","mobile"]],[/\b(zur\d{3}) b/i],["model",["vendor","Swiss"],["type","tablet"]],[/\b((zeki)?tb.*\b) b/i],["model",["vendor","Zeki"],["type","tablet"]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[["vendor","Dragon Touch"],"model",["type","tablet"]],[/\b(ns-?\w{0,9}) b/i],["model",["vendor","Insignia"],["type","tablet"]],[/\b((nxa|next)-?\w{0,9}) b/i],["model",["vendor","NextBook"],["type","tablet"]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[["vendor","Voice"],"model",["type","mobile"]],[/\b(lvtel\-)?(v1[12]) b/i],[["vendor","LvTel"],"model",["type","mobile"]],[/\b(ph-1) /i],["model",["vendor","Essential"],["type","mobile"]],[/\b(v(100md|700na|7011|917g).*\b) b/i],["model",["vendor","Envizen"],["type","tablet"]],[/\b(trio[-\w\. ]+) b/i],["model",["vendor","MachSpeed"],["type","tablet"]],[/\btu_(1491) b/i],["model",["vendor","Rotor"],["type","tablet"]],[/(shield[\w ]+) b/i],["model",["vendor","Nvidia"],["type","tablet"]],[/(sprint) (\w+)/i],["vendor","model",["type","mobile"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],["model",["vendor","Zebra"],["type","tablet"]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],["model",["vendor","Zebra"],["type","mobile"]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],["vendor","model",["type","console"]],[/droid.+; (shield) bui/i],["model",["vendor","Nvidia"],["type","console"]],[/(playstation [345portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],["model",["vendor","Microsoft"],["type","console"]],[/smart-tv.+(samsung)/i],["vendor",["type","smarttv"]],[/hbbtv.+maple;(\d+)/i],[["model",/^/,"SmartTV"],["vendor","Samsung"],["type","smarttv"]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[["vendor","LG"],["type","smarttv"]],[/(apple) ?tv/i],["vendor",["model","Apple TV"],["type","smarttv"]],[/crkey/i],[["model","Chromecast"],["vendor","Google"],["type","smarttv"]],[/droid.+aft(\w)( bui|\))/i],["model",["vendor","Amazon"],["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[["vendor",r],["model",r],["type","smarttv"]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[["type","smarttv"]],[/((pebble))app/i],["vendor","model",["type","wearable"]],[/droid.+; (glass) \d/i],["model",["vendor","Google"],["type","wearable"]],[/droid.+; (wt63?0{2,3})\)/i],["model",["vendor","Zebra"],["type","wearable"]],[/(quest( 2)?)/i],["model",["vendor","Facebook"],["type","wearable"]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],["vendor",["type","embedded"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],["model",["type","mobile"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],["model",["type","tablet"]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[["type","tablet"]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[["type","mobile"]],[/(android[-\w\. ]{0,9});.+buil/i],["model",["vendor","Generic"]]],s=[[/(applewebkit)\/([\w\.]+)/i],["name","version"]],c=[[/(mozilla)\/([\w\.]+)/i],["name","version"]],u=[[/(safari)\/([\w\.]+)/i],["name","version"]],l=[[/microsoft (windows) (vista|xp)/i],["name","version"],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],["name","version"],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[["name","Windows"],["version",t,{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[["version",/_/g,"."],["name","iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[["name","Mac OS"],["version",/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],["version","name"],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],["name","version"],[/\(bb(10);/i],["version",["name","BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],["version",["name","Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],["version",["name","Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],["version",["name","webOS"]],[/crkey\/([\d\.]+)/i],["version",["name","Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],["name","version"],[/(sunos) ?([\w\.\d]*)/i],[["name","Solaris"],"version"],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],["name","version"]];return e.Eb=["name","version","major"],e.Fb="model vendor type console mobile smarttv tablet wearable embedded".split(" "),e.Gb=["name","version"],e.Db=["name","version"],e.Nb=["name","version"],e.Ib=["name","version"],e}())),function(e){e()}(function(e,t,n,r,i,o,a,s,c,u,l){var d="",f="";return o.T[0]=function(t){return e.S(t,escape("@UTC@"),(i.Xa()||new Date).getTime())},o.h[106]=function(){return"1"},o.h[108]=function(){return d},o.h[109]=function(){return f},o.h[110]=function(){return t((new Date).getTime())},o.h[113]=function(){return 0+a.Y()},o.h[114]=function(){return n.Za()},o.h[115]=function(){var e=n.Z();return"boolean"==typeof e?0+e:""},o.h[116]=function(){return n.$()},o.h[118]=function(){return l.jb()||""},r.J.sa([function(){return u.Sa()}]),r.X.push(i.o,n.o,u.Ma,a.Ja,a.La),r.ca.push((function(){d=f="";var e=r.j,n=e[3];if(n){e=e[4];e:{for(var i=n+"=",o=document.cookie.split(/; */g),a=0;a<o.length;a++){var s=o[a];if(0===s.indexOf(i)){f=s.substring(i.length,s.length);break e}}f=""}f?d="0":(i=(new Date).getTime(),f=t(i),document.cookie=n+"="+f+"; expires="+new Date(i+63072e6).toUTCString()+(e?"; domain=."+e:"")+"; path=/",d="1")}})),function(e){s(e)}}(r,i,c,o,u,b,l,d,0,function(e,t){function n(e,n,r){function i(e){a.reject(e)}function o(e){a.O(e)}var a=new t;try{try{e[n].apply(e,r).then(o,i)}catch(t){e[n].apply(e,r.concat([o,i]))}}catch(e){i(e)}return a}var r=window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection,i=[];return{Ma:function(){var t=null,o=null;return{start:function(e){try{i=[],(t=new r({iceServers:[]})).onicecandidate=function(t){if(!e.g()){var n;e:{try{var r=t.candidate;if(r){var o=r.candidate;if(o){i.push(o),n=!0;break e}}}catch(e){}n=!1}n||e.b()}},o=t.createDataChannel(""),n(t,"createOffer",[]).then((function(r){if(!e.g())return n(t,"setLocalDescription",[r])})).then(null,(function(){e.g()||e.b()}))}catch(t){e.b()}},finish:function(){t&&(t.onicecandidate=null,o&&(o.close(),o=null),t.close(),t=null)},v:e.l}},Sa:function(){for(var e="",t="",n=0;n<i.length;n++){var r=i[n].replace(/^[^:]*:/,"").split(" ");8<=r.length&&(e+=t+r[4]+" "+r[7],t=",")}return e}}}(o,a),function(){var e=["webgl","experimental-webgl","moz-webgl","webkit-3d"],t=/android|\badr\b|silk|kindle/i;return{jb:function(){if(window.WebGLRenderingContext&&!t.test(navigator.userAgent)){for(var n=document.createElement("canvas"),r=null,i=0;i<e.length&&!r;i++)r=n.getContext(e[i]);if(null!==r&&r.getExtension("WEBGL_debug_renderer_info"))return r.getParameter(37446)}return null},Cb:function(){if(!window.WebGLRenderingContext)throw Error();var t={m:null,Ia:null,Lb:function(e){return this.m.getParameter(e)},Jb:function(e){return this.m.getContextAttributes()[e]},Mb:function(e,t){return this.m.getShaderPrecisionFormat(e,t)},Kb:function(){return this.m.getSupportedExtensions()},pb:function(){if(!this.m){for(var t=document.createElement("canvas"),n=0;n<e.length;n++){var r=e[n];if(this.m=t.getContext(r))return void(this.Ia=r)}throw Error()}}};return t.pb(),t}}}()))},434:(e,t,n)=>{"use strict";e.exports=n(128).polyfill()},128:function(e,t,n){e.exports=function(){"use strict";function e(e){return"function"==typeof e}var t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,i=void 0,o=void 0,a=function(e,t){p[r]=e,p[r+1]=t,2===(r+=2)&&(o?o(m):g())};var s="undefined"!=typeof window?window:void 0,c=s||{},u=c.MutationObserver||c.WebKitMutationObserver,l="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(m,1)}}var p=new Array(1e3);function m(){for(var e=0;e<r;e+=2)(0,p[e])(p[e+1]),p[e]=void 0,p[e+1]=void 0;r=0}var h,v,y,b,g=void 0;function w(e,t){var n=this,r=new this.constructor(x);void 0===r[_]&&H(r);var i=n._state;if(i){var o=arguments[i-1];a((function(){return L(i,r,o,n._result)}))}else I(n,r,e,t);return r}function k(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(x);return E(t,e),t}g=l?function(){return process.nextTick(m)}:u?(v=0,y=new u(m),b=document.createTextNode(""),y.observe(b,{characterData:!0}),function(){b.data=v=++v%2}):d?((h=new MessageChannel).port1.onmessage=m,function(){return h.port2.postMessage(0)}):void 0===s?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(m)}:f()}catch(e){return f()}}():f();var _=Math.random().toString(36).substring(2);function x(){}var C=void 0,S=1,T=2,j={error:null};function P(e){try{return e.then}catch(e){return j.error=e,j}}function O(t,n,r){n.constructor===t.constructor&&r===w&&n.constructor.resolve===k?function(e,t){t._state===S?z(e,t._result):t._state===T?D(e,t._result):I(t,void 0,(function(t){return E(e,t)}),(function(t){return D(e,t)}))}(t,n):r===j?(D(t,j.error),j.error=null):void 0===r?z(t,n):e(r)?function(e,t,n){a((function(e){var r=!1,i=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?E(e,n):z(e,n))}),(function(t){r||(r=!0,D(e,t))}),e._label);!r&&i&&(r=!0,D(e,i))}),e)}(t,n,r):z(t,n)}function E(e,t){var n,r;e===t?D(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!==r&&"function"!==r?z(e,t):O(e,t,P(t)))}function A(e){e._onerror&&e._onerror(e._result),B(e)}function z(e,t){e._state===C&&(e._result=t,e._state=S,0!==e._subscribers.length&&a(B,e))}function D(e,t){e._state===C&&(e._state=T,e._result=t,a(A,e))}function I(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+S]=n,i[o+T]=r,0===o&&e._state&&a(B,e)}function B(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?L(n,r,i,o):i(o);e._subscribers.length=0}}function L(t,n,r,i){var o=e(r),a=void 0,s=void 0,c=void 0,u=void 0;if(o){if((a=function(e,t){try{return e(t)}catch(e){return j.error=e,j}}(r,i))===j?(u=!0,s=a.error,a.error=null):c=!0,n===a)return void D(n,new TypeError("A promises callback cannot return that same promise."))}else a=i,c=!0;n._state!==C||(o&&c?E(n,a):u?D(n,s):t===S?z(n,a):t===T&&D(n,a))}var M=0;function H(e){e[_]=M++,e._state=void 0,e._result=void 0,e._subscribers=[]}var R=function(){function e(e,n){this._instanceConstructor=e,this.promise=new e(x),this.promise[_]||H(this.promise),t(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?z(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&z(this.promise,this._result))):D(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===C&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===k){var i=P(e);if(i===w&&e._state!==C)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===N){var o=new n(x);O(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===C&&(this._remaining--,e===T?D(r,n):this._result[t]=n),0===this._remaining&&z(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;I(e,void 0,(function(e){return n._settledAt(S,t,e)}),(function(e){return n._settledAt(T,t,e)}))},e}();var N=function(){function t(e){this[_]=M++,this._result=this._state=void 0,this._subscribers=[],x!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){E(e,t)}),(function(t){D(e,t)}))}catch(t){D(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this,r=n.constructor;return e(t)?n.then((function(e){return r.resolve(t()).then((function(){return e}))}),(function(e){return r.resolve(t()).then((function(){throw e}))})):n.then(t,t)},t}();return N.prototype.then=w,N.all=function(e){return new R(this,e).promise},N.race=function(e){var n=this;return t(e)?new n((function(t,r){for(var i=e.length,o=0;o<i;o++)n.resolve(e[o]).then(t,r)})):new n((function(e,t){return t(new TypeError("You must pass an array to race."))}))},N.resolve=k,N.reject=function(e){var t=new this(x);return D(t,e),t},N._setScheduler=function(e){o=e},N._setAsap=function(e){a=e},N._asap=a,N.polyfill=function(){var e=void 0;if(void 0!==n.g)e=n.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=N},N.Promise=N,N}()},161:(e,t,n)=>{var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(198),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},198:e=>{!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u=t.regeneratorRuntime;if(u)e.exports=u;else{(u=t.regeneratorRuntime=e.exports).wrap=g;var l="suspendedStart",d="suspendedYield",f="executing",p="completed",m={},h={};h[a]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==r&&i.call(y,a)&&(h=y);var b=x.prototype=k.prototype=Object.create(h);_.prototype=b.constructor=x,x.constructor=_,x[c]=_.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(b),e},u.awrap=function(e){return{__await:e}},C(S.prototype),S.prototype[s]=function(){return this},u.AsyncIterator=S,u.async=function(e,t,n,r){var i=new S(g(e,t,n,r));return u.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(b),b[c]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},u.values=E,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function g(e,t,n,r){var i=t&&t.prototype instanceof k?t:k,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(e,t,n){var r=l;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=w(e,t,n);if("normal"===c.type){if(r=n.done?p:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function k(){}function _(){}function x(){}function C(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function S(e){function t(n,r,o,a){var s=w(e[n],e,r);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,o,a)}),(function(e){t("throw",e,o,a)})):Promise.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return t("throw",e,o,a)}))}a(s.arg)}var n;this._invoke=function(e,r){function i(){return new Promise((function(n,i){t(e,r,n,i)}))}return n=n?n.then(i,i):i()}}function T(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,T(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=w(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function E(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(960),t=n.n(e),r=n(579),i=n.n(r),o=n(606),a=n.n(o),s=n(784),c=n.n(s),u=n(467),l=n.n(u),d=(n(434),n(105),n(963)),f=n.n(d);const p=function(){function e(){a()(this,e)}return c()(e,null,[{key:"createCORSRequest",value:function(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(e,t):n=null,n}},{key:"toQueryParams",value:function(e){var t=[];return Object.keys(e).forEach((function(n){var r=e[n];null!=r&&(r&&"object"===f()(r)?Object.keys(r).forEach((function(r){t.push("".concat(n,"[]=").concat(encodeURIComponent(e[n][r])))})):t.push("".concat(n,"=").concat(encodeURIComponent(e[n]))))})),t.join("&").replace(/\[\]\[\]/g,"[]")}},{key:"get",value:function(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Promise((function(o,a){t=t+"?"+r.toQueryParams(n);var s=e.createCORSRequest("GET",t);s.setRequestHeader("CONTENT-TYPE","application/json"),s.setRequestHeader("staxjs-version","v1.51.1"),i&&s.setRequestHeader("Authorization","Bearer "+i),s.onreadystatechange=function(){4===s.readyState&&(200===s.status?o(e.parse(s.responseText)):(console.error("error",s.status),s.responseText?a(e.parse(s.responseText)):a({status:s.status,readyState:s.readyState})))},s.addEventListener("error",(function(e){a(e)}),!1),s.addEventListener("abort",(function(e){a(e)}),!1),s.send()}))}},{key:"post",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Promise((function(i,o){var a=JSON.stringify(n),s=e.createCORSRequest("POST",t);s.setRequestHeader("CONTENT-TYPE","application/json"),s.setRequestHeader("staxjs-version","v1.51.1"),r&&s.setRequestHeader("Authorization","Bearer "+r),s.onreadystatechange=function(){4===s.readyState&&(200===s.status?i(e.parse(s.responseText)):(console.error("error",s.status),s.responseText?o(e.parse(s.responseText)):o({status:s.status,readyState:s.readyState})))},s.addEventListener("error",(function(e){o(e)}),!1),s.addEventListener("abort",(function(e){o(e)}),!1),s.send(a)}))}},{key:"parse",value:function(e){try{return JSON.parse(e)}catch(t){throw console.error(t,e),new Error(e)}}}])}();var m=function(e){return function(e){return!!e&&"object"===f()(e)}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===h}(e)}(e)},h="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function v(e,t){return!1!==t.clone&&t.isMergeableObject(e)?w((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function y(e,t,n){return e.concat(t).map((function(e){return v(e,n)}))}function b(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return{}.propertyIsEnumerable.call(e,t)})):[]}(e))}function g(e,t){try{return t in e}catch(e){return!1}}function w(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||y,n.isMergeableObject=n.isMergeableObject||m,n.cloneUnlessOtherwiseSpecified=v;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&b(e).forEach((function(t){r[t]=v(e[t],n)})),b(t).forEach((function(i){(function(e,t){return g(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(g(e,i)&&n.isMergeableObject(t[i])?r[i]=function(e,t){if(!t.customMerge)return w;var n=t.customMerge(e);return"function"==typeof n?n:w}(i,n)(e[i],t[i],n):r[i]=v(t[i],n))})),r}(e,t,n):v(t,n)}w.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return w(e,n,t)}),{})};var k=function(){return c()((function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.publicToken,i=void 0===r?null:r,o=n.vendor,s=void 0===o?null:o,c=n.tokenizing_key,u=void 0===c?null:c,l=n.is_sandbox,d=void 0===l?null:l;a()(this,e),t()(this,"publicToken",void 0),t()(this,"vendor",void 0),t()(this,"isSandbox",void 0),t()(this,"tokenizingKey",void 0),this.publicToken=i,this.vendor=s,this.isSandbox=!!d,this.tokenizingKey=u}),[{key:"shouldUseBlockChyp",value:function(){return"blockchyp"===this.vendor&&null!==this.tokenizingKey}},{key:"useDev",value:function(){return!1}},{key:"renderErrorState",value:function(e){var t=document.getElementById(e);t&&(t.innerHTML='\n      <div style="\n        position: relative;\n        width: 100%;\n        height: 100%;\n      ">\n        <span style="\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          width: fit-content;\n          display: block;\n        ">\n          <style>\n            @keyframes vendor-rotate {\n              0% { transform: rotate(0deg);}\n              100% { transform: rotate(360deg);}\n            }\n            .vendor-rotating-svg {\n              animation: vendor-rotate 1s linear infinite;\n              display: inline-block;\n            }\n          </style>\n          <svg class="vendor-rotating-svg" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 68 68" fill="none">\n            <path d="M4 36C4 31.7977 4.8277 27.6366 6.43585 23.7541C8.044 19.8717 10.4011 16.3441 13.3726 13.3726C16.3441 10.4011 19.8717 8.04401 23.7541 6.43585C27.6365 4.8277 31.7977 4 36 4" stroke="#B93BE4" stroke-width="8"/>\n          </svg>\n        </span>\n      </div>\n    ')}}])}();function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?_(Object(r),!0).forEach((function(n){t()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=function(){return c()((function e(){a()(this,e),this.diagnostics={logs:[],scriptLoadTime:null,scriptLoadError:null,envVarsPresent:!1,grecaptchaAvailable:!1,errors:[],userAgent:navigator.userAgent,timestamp:(new Date).toISOString(),captchaEnvUsed:"false",tokenGenerationAttempts:0,lastTokenGeneratedAt:null,initialized:!1}}),[{key:"isConfigured",value:function(){return!1}},{key:"resetLogs",value:function(){console.log("Resetting logs"),console.log(this.diagnostics),this.diagnostics.logs=[],this.diagnostics.errors=[]}},{key:"isLoaded",value:function(){return"undefined"!=typeof window&&!!window.grecaptcha}},{key:"_logInitialized",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];console.log("[RecaptchaService Initialized] ".concat(e),t),n?this.diagnostics.errors.push({type:"initialized_error",timestamp:(new Date).toISOString(),message:e,data:t}):this.diagnostics.logs.push({timestamp:(new Date).toISOString(),message:e,data:t})}},{key:"_log",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("[RecaptchaService] ".concat(e),t),this.diagnostics.logs.push({timestamp:(new Date).toISOString(),message:e,data:t})}},{key:"generateToken",value:(t=i()(l().mark((function e(t){var n,r,i=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},this.diagnostics.tokenGenerationAttempts++,this.isConfigured()){e.next=5;break}return this._log("Skipping token generation - env vars missing",x({action:t},n)),e.abrupt("return",null);case 5:if(this._log("Attempting to generate token",x({grecaptchaAvailable:this.isLoaded(),action:t,attempt:this.diagnostics.tokenGenerationAttempts},n)),this.isLoaded()){e.next=10;break}return this._log("Cannot generate token - grecaptcha not available",x({action:t},n)),this.diagnostics.errors.push({type:"grecaptcha_not_loaded",action:t,timestamp:(new Date).toISOString()}),e.abrupt("return",null);case 10:return e.prev=10,e.next=13,window.grecaptcha.execute("",{action:t});case 13:return r=e.sent,this.diagnostics.lastTokenGeneratedAt=(new Date).toISOString(),this.diagnostics.initialized=!0,this._log("Token generated successfully",x({action:t,tokenLength:r.length},n)),e.abrupt("return",r);case 20:return e.prev=20,e.t0=e.catch(10),this.diagnostics.errors.push({type:"token_generation_error",action:t,error:e.t0.toString(),timestamp:(new Date).toISOString()}),this._log("Failed to generate token",x({action:t,error:e.t0.toString()},n)),e.abrupt("return",null);case 25:case"end":return e.stop()}}),e,this,[[10,20]])}))),function(e){return t.apply(this,arguments)})},{key:"initialize",value:(e=i()(l().mark((function e(){var t,n,r=this,i=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=Date.now(),e.abrupt("return",new Promise((function(e,i){var o=r.isConfigured();if(r.diagnostics.envVarsPresent=o,r._logInitialized("Checking Recaptcha env vars",{hasEnvVars:o,url:"missing",siteKey:"missing"}),o&&t.reCAPTCHATermsElementID&&t.appendReCAPTCHATerms&&t.appendReCAPTCHATerms(t.reCAPTCHATermsElementID),o&&!r.isLoaded()){r._logInitialized("Loading Recaptcha script",{grecaptchaExists:!1});var a=document.createElement("script");a.src="".concat("","?render=").concat(""),document.getElementsByTagName("head")[0].appendChild(a),t.reCAPTCHATermsElementID&&t.appendBadgeHideCSS&&t.appendBadgeHideCSS(),a.onload=function(){var t=Date.now()-n;r.diagnostics.scriptLoadTime=t,r.diagnostics.grecaptchaAvailable=!0,r.diagnostics.initialized=!0,r._logInitialized("Recaptcha script loaded successfully",{loadTime:t,grecaptchaReady:void 0!==window.grecaptcha}),window.grecaptcha&&window.grecaptcha.ready?window.grecaptcha.ready((function(){return e(!0)})):e(!0)},a.onerror=function(e){r.diagnostics.scriptLoadError=e,r.diagnostics.errors.push({type:"script_load_error",error:e.toString(),timestamp:(new Date).toISOString()}),r._logInitialized("Recaptcha script failed to load",{error:e.toString()},!0),i(e)}}else r.isLoaded()?(r.diagnostics.grecaptchaAvailable=!0,r.diagnostics.initialized=!0,r._logInitialized("Recaptcha already loaded",{grecaptchaExists:!0})):r._logInitialized("Recaptcha env vars missing or not loaded",{hasEnvVars:o}),e(!0)})));case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})},{key:"getDiagnostics",value:function(){return this.diagnostics}}]);var e,t}();function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?S(Object(r),!0).forEach((function(n){t()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const j=function(){return c()((function e(t,n,r){var i;a()(this,e),this.token=t,this.url=n,this.fjs=r,this.getMerchantPromise=this._getMerchant(),this.getVendorConfigPromise=this._getVendorConfig(t,!(null!==(i=r.conf)&&void 0!==i&&i._experimental_doVendorLookup)),this.vendorConfig=null,this.recaptchaService=new C,r&&(this._digitalWalletCallback=this.digitalWalletCallback.bind(this))}),[{key:"_getVendorConfig",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t=!new URLSearchParams(window.location.href).has("forceVendorLookup")&&t)return null;var n="".concat("https://fattqueryprod.fattlabs.com","/store/").concat(e,"/vendor");return p.get(n,{})}},{key:"getVendorConfig",value:(f=i()(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.vendorConfig){e.next=2;break}return e.abrupt("return",this.vendorConfig);case 2:return e.prev=2,e.next=5,this.getVendorConfigPromise;case 5:return t=e.sent,this.vendorConfig=new k(null!=t?t:{}),e.abrupt("return",this.vendorConfig);case 10:throw e.prev=10,e.t0=e.catch(2),this.fjs.emit("vendor_lookup_error"),new k({}).renderErrorState(this.fjs.conf.number.id),{code:"fatal_error",message:"There was an issue loading the payment form"};case 16:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(){return f.apply(this,arguments)})},{key:"createWebPayment",value:function(e){return"bank"===e.method?this._createWebPaymentBank(e):this._createWebPaymentCard(e)}},{key:"tokenizeWebPaymentMethod",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"bank"===e.method?this._tokenizeWebPaymentMethodBank(e,t):this._tokenizeWebPaymentMethodCard(e,t)}},{key:"calculateSurcharge",value:function(e,t){var n={payment_method_id:e,total:t},r="".concat(this.url,"/surcharge/review");return p.get(r,n)}},{key:"webPaymentPost",value:(d=i()(l().mark((function e(t,n,r){var i,o,a,s,c=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>3&&void 0!==c[3]?c[3]:"",r=r.replace("-","_"),e.next=4,this.recaptchaService.generateToken(r,{hasExistingPaymentMethod:!1});case 4:return(o=e.sent)&&(n.recaptcha_token=o),n.recaptcha_diagnostics=this.recaptchaService.getDiagnostics(),e.next=9,this.getMerchantPromise;case 9:return a="".concat(this.url,"/webpayment/").concat(this.merchant.hosted_payments_token).concat(t),e.next=12,p.post(a,n,i);case 12:return s=e.sent,this.recaptchaService.resetLogs(),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return d.apply(this,arguments)})},{key:"_createWebPaymentCard",value:(u=i()(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildTokenizeWebPaymentCardRequest(t),e.next=3,this.webPaymentPost("",n,"create_webpayment_card");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"digitalWalletCallback",value:function(e){var t=this.fjs,n=t.getPrice(),r="nmi";switch(e.tokenType){case"googlePay":r="google_pay";break;case"applePay":r="apple_pay"}if(e.token){var i=T({payment_method:"card",token_type:r,payment_token:"nmi_"+e.token,total:n,wallet:e.wallet},this._extractDigitalWalletData(e.wallet));t.emit("digitalwallet_tokenize",i)}else t.emit("digitalwallet_tokenize_failure",{message:"token could not be retrieved"});return t.config&&t.config.digitalWalletCallback&&t.config.digitalWalletCallback(e),!1}},{key:"_extractDigitalWalletData",value:function(e){var t=new Date;t.setDate(0);var n={month:t.getMonth()+1||"01",year:t.getFullYear()||"2021",email:e.email||"",type:e.cardNetwork,last_four:e.cardDetails};if(e.billingInfo||e.shippingInfo){var r=e.billingInfo||e.shippingInfo;r&&(n.phone=r.phone||"",n.phone&&0===n.phone.indexOf("1")&&(n.phone=n.phone.substr(1)),n.first_name=r.firstName?r.firstName:"",n.last_name=r.lastName?r.lastName:"",n.address_1=r.address1?r.address1:"",n.address_2=r.address2?r.address2:"",n.address_city=r.city?r.city:"",n.address_state=r.state?r.state:"",n.address_zip=r.postalCode?r.postalCode:"",n.address_country=r.country?r.country:"",n.first_name&&n.last_name&&(n.person_name="".concat(n.first_name," ").concat(n.last_name)))}return n}},{key:"_getMerchant",value:(s=i()(l().mark((function e(){var t,n,r,i,o,a,s,c,u=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=this).fjs,r=window.location&&window.location.hostname?window.location.hostname:"",i="".concat("https://fattqueryprod.fattlabs.com","/store/").concat(this.token),o=p.get(i,{domain:r}),e.next=7,o;case 7:return a=e.sent,t.digitalWalletToken=(null==a?void 0:a.cnp_digital_wallet_token)||null,t.merchant=a,null!=a&&a.allow_ocr_tokenization?(a.ocr_key?t.ocr_key=a.ocr_key:n.conf&&n.conf.ocr&&n.conf.ocr.key?t.ocr_key=n.conf.ocr.key:t.fjs.emit("orc_error",{message:"OCR key not set for domain ".concat(r)}),t.ocr_key?((s=document.createElement("script")).src="/blinkcard-sdk.min.js",document.head.appendChild(s),s.onload=function(){if(BlinkCardSDK&&BlinkCardSDK.isBrowserSupported()&&t.ocr_key){try{var e=n.conf;if(e&&e.number&&e.number.id){var r=document.getElementById(e.number.id);if(r){var i=document.createElement("input");e.number.ocrStyle&&(i.style.cssText=new String(e.number.ocrStyle)),i.className=new String(r.className||" ocr-clone"),i.style.display="none",i.id=new String(r.id+"-ocr"),r.name&&(i.name=new String(r.name+"-ocr")),r.appendChild(i),e.ocr&&(e.ocr.number=i)}}if(e&&e.cvv&&e.cvv.id){var o=document.getElementById(e.cvv.id);if(o){var a=document.createElement("input");e.cvv.style&&(a.style.cssText=new String(e.cvv.style)),a.className=new String(o.className||" ocr-clone"),a.style.display="none",a.id=new String(o.id+"-ocr"),o.name&&(a.name=new String(o.name+"-ocr")),o.appendChild(a),e.ocr&&(e.ocr.cvv=a)}}}catch(e){u.emit("ocr_error",{message:"configuration properties not defined for ocr usage"}),u._disableOcr()}t.fjs.emit("ocr_enabled",{message:"OCR is enabled",key:t.ocr_key}),t.allow_ocr_tokenization=!0}else u._disableOcr()}):(t.fjs.emit("ocr_error",{message:"Merchant is enabled for OCR, but a license key is not assigned to this domain."}),this._disableOcr())):this._disableOcr(),1==!!t.is_surcharge_enabled?t.fjs.emit("digitalwallet_surcharge",{message:"digital wallets are not supported with surcharging merchants"}):t.digitalWalletToken?(t.fjs.emit("digitalwallet_exists",{message:"merchant has digital wallet token",token:t.digitalWalletToken}),(c=document.createElement("script")).src="https://secure.networkmerchants.com/token/Collect.js",[["data-tokenization-key",t.digitalWalletToken],["data-variant","inline"],["data-currency","USD"],["data-country","US"]].forEach((function(e){c.setAttribute(e[0],e[1])})),document.getElementsByTagName("head")[0].appendChild(c),c.onerror=function(){t.fjs.emit("digitalwallet_error",{message:"The digital wallet tokenization service could not be loaded.  Does this merchant have a valid digital wallet token?"})},c.onload=function(){var e=window.CollectJS;if(!e)throw"could not load collectjs";try{!e.config.price===e.config.price!=t.fjs.conf.price&&(e.config.price=t.fjs.conf.price),e.config.callback=t._digitalWalletCallback,t.fjs.conf||(t.fjs.conf={}),e.config.fields||(e.config.fields={}),e.config.fields.applePay=w(e.config.fields.applePay,t.fjs.conf.applePay),e.config.fields.googlePay=w(e.config.fields.googlePay,t.fjs.conf.googlePay),e.configure(e.config),t.fjs.emit("digitalwallet_initialized",e.config)}catch(n){t.fjs.emit("digitalwallet_error",{message:"The digital wallet tokenization service could not be initialized.  Check your configuration options for errors.",details:e.config||{}})}}):t.fjs.emit("digitalwallet_notoken",{message:"This merchant does not have a digital wallet token defined."}),e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"_createWebPaymentBank",value:(o=i()(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildTokenizeWebPaymentBankRequest(t),e.next=3,this.webPaymentPost("",n,"create_webpayment_bank");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"_tokenizeWebPaymentMethodCard",value:(r=i()(l().mark((function e(t){var n,r,i=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",r=this._buildTokenizeWebPaymentCardRequest(t),e.next=4,this.webPaymentPost("/token",r,"tokenize_card",n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_tokenizeWebPaymentMethodBank",value:(n=i()(l().mark((function e(t){var n,r=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"",t&&(t.phone&&(t.phone=t.phone.replace(/[^0-9]/g,"")),0==!!t.company&&(t.company=""),0==!!t.email&&(t.email="")),e.next=4,this.webPaymentPost("/token",t,"tokenize_bank",n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_buildTokenizeSharedFields",value:function(e){var t=e.first_name||e.firstname||e.firstName||"",n=e.last_name||e.lastname||e.lastName||"",r=e.company||e.companyName||e.company_name||"",i=e.person_name||e.billing_name||e.personName||"".concat(t," ").concat(n),o={channel:e.channel,match_customer:"boolean"==typeof e.match_customer?e.match_customer:void 0,bill_id:e.bill_id||void 0,customer_id:e.customer_id||void 0,send_receipt:e.send_receipt,save_for_future:e.save_for_future,rule:e.rule||"",total:e.total||0,url:e.url||"https://omni.fattmerchant.com/#/bill/",meta:T({},e.meta||{}),company:r,person_name:i,firstname:t,lastname:n,paymentLinkId:e.paymentLinkId||null};return e.recaptcha_token&&(o.recaptcha_token=e.recaptcha_token),e.recaptcha_diagnostics&&(o.recaptcha_diagnostics=e.recaptcha_diagnostics),e.idempotency_id&&(o.idempotency_id=e.idempotency_id),o}},{key:"_buildTokenizeWebPaymentCardRequest",value:function(e){var t=1===String(e.month).length?"0".concat(e.month):String(e.month),n=4===String(e.year).length?String(e.year):"20".concat(e.year),r="".concat(t).concat(n.substr(2,2)),i=e.first_name||e.firstname||e.firstName||"",o=e.last_name||e.lastname||e.lastName||"",a=e.company||e.companyName||e.company_name||"",s=e.person_name||e.billing_name||e.personName||"".concat(i," ").concat(o),c=e.address_1||e.address_line_1||e.line1||e.line_1||"",u=e.address_2||e.address_line_2||e.line2||e.line_2||"",l=e.city||e.address_city||e.addresCity||"",d=e.state||e.address_state||e.addressState||"",f=e.zip||e.address_zip||e.addressZip||e.postalCode||e.postal_code||"",p=e.addressCountry||e.address_country||e.country||"USA",m=T(T({},this._buildTokenizeSharedFields(e)),{},{phone:String(e.phone||"").replace(/[\D]/g,""),firstname:i,lastname:o,address_zip:f,company:a,email:e.email||"",address_country:3!=p.length?"":p,person_name:s,method:e.method||"card",card_number:"",card_exp:r,address_1:c,address_2:u,address_city:l,address_state:String(d||"").substr(0,2),payment_token:e.payment_token,payment_method_id:e.payment_method_id,token_type:e.token_type||null});return e.currency&&(m.currency=e.currency),e.wallet&&e.wallet.cardNetwork&&e.wallet.cardDetails&&(m.type=e.wallet.cardNetwork,m.last_four=e.wallet.cardDetails),m}},{key:"_buildTokenizeWebPaymentBankRequest",value:function(e){return T(T({},this._buildTokenizeSharedFields(e)),{},{payment_method_id:e.paymentToken||e.payment_token})}},{key:"_removeUndefined",value:function(e){return Object.keys(e).forEach((function(t){return null==e[t]?delete e[t]:{}})),e}},{key:"initializeOcr",value:(t=i()(l().mark((function e(t){var n,r,i,o,a,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this).allow_ocr_tokenization){e.next=4;break}return n.fjs.emit("ocr_error",{message:"OCR is not enabled for this merchant"}),e.abrupt("return",!1);case 4:if(t){e.next=15;break}if(e.prev=5,t=document.getElementsByTagName("form")[0].id){e.next=9;break}throw new Error("form does not have an id");case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),n.fjs.emit("ocr_error",{message:"A form ID was not passed to initializeOcr.  The form that contains the payment fields must have a unique ID attribute"}),e.abrupt("return");case 15:return r=document.getElementById(t),(i=document.getElementById("ocr-loading"))||((i=document.createElement("div")).id="ocr-loading",i.innerHTML='<div><h1>OCR Toolkit Loading...</h1><progress id="ocr-load-progress" value="0" max="100"></progress></div>',i.style.cssText="top: 50%; left: 50%;position:absolute;",document.body.appendChild(i)),o=document.getElementById("ocr-load-progress"),e.prev=19,i.style.display="block",n._changeCardNumberAndCvvFields(),r.style.display="none",(a=new BlinkCardSDK.WasmSDKLoadSettings(n.ocr_key||"")).engineLocation="/resources",a.loadProgressCallback=function(e){o.value=e},s={timeout:60,toolbarClass:"",toolbarStyle:"position: absolute; top: 0px; left: 0px; right: 0px; font-weight: bold; display: block;padding:1em;background-color: rgba(255,255,255,0.5);border:1px solid black;",frontPrompt:"[&#x231B;] Please position the front of the card in view of the camera",rearPrompt:"[<span style='color:green'>&check;</span>] Front Scanned\n      <br/>\n      [&#x231B;] Please present the rear of the card",closeText:"&#x274c;",closeStyle:"float:right;cursor:pointer;color:red;font-weight:bold;",closeClass:"",textStyle:"float: left;",textClass:"",statusbarStyle:"position: absolute; text-align:center; bottom: 0px; left: 0px; right: 0px; font-weight: bold; display: block;padding:1em;background-color: rgba(255,255,255,0.5);border:1px solid black;"},n.fjs.conf||(n.fjs.conf={}),n.fjs.conf.ocr||(n.fjs.conf.ocr={}),n.fjs.conf.ocr=this._removeUndefined(n.fjs.conf.ocr),n.fjs.conf.ocr=T(T({},s),n.fjs.conf.ocr),e.next=33,BlinkCardSDK.loadWasmModule(a);case 33:c=e.sent,n._startScan(c,t),e.next=42;break;case 37:e.prev=37,e.t1=e.catch(19),console.log(e.t1),r.style.display="block",n.fjs.emit("ocr_error",{message:"Failed to load SDK! ".error});case 42:return e.prev=42,e.finish(42);case 44:return n.fjs.emit("ocr_initiated",{message:"OCR initiated"}),e.abrupt("return",n);case 46:case"end":return e.stop()}}),e,this,[[5,11],[19,37,42,44]])}))),function(e){return t.apply(this,arguments)})},{key:"_setOcrTimeout",value:function(e){var t=this;e||(e=this.fjs.conf.ocr.timeout||60);var n=function(){var n=i()(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.ocrVideo){n.next=4;break}return t.ocrVideo.cancelled=!0,n.next=4,t.ocrVideo.releaseVideoFeed();case 4:t.fjs.emit("ocr_timeout",{message:"OCR timed out after ".concat(e," seconds")});case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return setTimeout(n,1e3*e)}},{key:"_startScan",value:(e=i()(l().mark((function e(t,n){var r,i,o,a,s,c,u,d=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.fjs,(i=document.getElementById("ocr-screen-scanning"))?(window.ocrCancel=this._ocrCancel.bind(this),this._ocrSetStage(0)):i=this._insertScreenScanningElementIntoDOM(),e.next=5,BlinkCardSDK.createBlinkCardRecognizer(t);case 5:return o=e.sent,this.ocrTimeout=this._setOcrTimeout(),a={onGlare:function(e){e&&alert("OCR Detection will not be reliable due to high glare. Ensure the card is not directly lit.")},onQuadDetection:function(e){return d.ocrDrawBox(e)},onFirstSideResult:function(){d._ocrSetStage(1),r.emit("ocr_flip",{message:"Please flip card; first side read"}),d.ocrTimeout&&clearTimeout(d.ocrTimeout),d.ocrTimeout=d._setOcrTimeout()}},e.next=10,BlinkCardSDK.createRecognizerRunner(t,[o],!1,a);case 10:return s=e.sent,e.next=13,BlinkCardSDK.VideoRecognizer.createVideoRecognizerFromCameraStream(i.querySelector("video"),s);case 13:return c=e.sent,this.ocrVideo=c,e.next=17,c.recognize();case 17:if(e.sent===BlinkCardSDK.RecognizerResultState.Empty){e.next=25;break}return e.next=21,o.getResult();case 21:(u=e.sent).state!==BlinkCardSDK.RecognizerResultState.Empty&&(clearTimeout(this.ocrTimeout),this._insertBlinkcardResultIntoForm(u,n),r.emit("ocr_success",{message:"Completed credit card scanning",data:u})),e.next=26;break;case 25:r.emit("ocr_error",{message:"Could not extract information!"});case 26:c.releaseVideoFeed(),s.delete(),o.delete(),document.getElementById(n).style.display="block",i&&i.remove();case 31:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"_insertBlinkcardResultIntoForm",value:function(e,t){var n=e.cardNumber,r=e.cvv,i=e.expiryDate,o=e.owner.split(" "),a=document.getElementById(t);return a.querySelector("input[name=cardholder-first-name]").value=o[0],a.querySelector("input[name=cardholder-last-name]").value=o.slice(1).join(" "),a.querySelector("input[name=month]").value=i.month,a.querySelector("input[name=year]").value=i.year,a.querySelector("input[name=card_number]").value=n,a.querySelector("input[name=card_cvv]").value=r,a}},{key:"_ocrCancel",value:function(){clearTimeout(this.ocrTimeout),this.ocrVideo&&(this.ocrVideo.cancelled=!0,this.ocrVideo.releaseVideoFeed()),this.fjs.emit("ocr_cancel",{message:"OCR Canceled by user"})}},{key:"_ocrSetStage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t={0:"",1:""};t[0]=this.fjs.conf.ocr.frontPrompt,t[1]=this.fjs.conf.ocr.rearPrompt;var n=document.getElementById("ocr-toolbar-text");n&&(n.innerHTML=t[e])}},{key:"_insertScreenScanningElementIntoDOM",value:function(){var e=document.createElement("div");e.id="ocr-screen-scanning",e.style.cssText="position:relative";var t=this.fjs.conf.ocr;return e.innerHTML='\n  <video id="ocr-camera-feed" playsinline></video>\n  <canvas id="ocr-camera-feedback" willReadFrequently=true style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%;"></canvas>\n  <div id="ocr-toolbar" class=\''.concat(t.toolbarStyle,"' style='").concat(t.toolbarStyle,";display:none;'>\n   <div style=\"").concat(t.textStyle,'" class="').concat(t.textClass,'" id="ocr-toolbar-text">...</div>\n   <h3 style="').concat(t.closeStyle,'" class="').concat(t.closeClass,'" id="ocr-toolbar-cancel" onclick="ocrCancel();" alt="Cancel OCR">').concat(t.closeText,'</h3>\n  </div>\n  <div id="ocr-statusbar" class=\'').concat(t.toolbarClass,"' style='").concat(t.statusbarStyle,";display:none;'>"),document.body.appendChild(e),window.ocrCancel=this._ocrCancel.bind(this),this._ocrSetStage(0),e}},{key:"_changeCardNumberAndCvvFields",value:function(){var e=this.fjs,t=document.getElementById(e.conf.number.id),n=document.getElementById(e.conf.cvv.id),r=t.querySelector("iframe"),i=n.querySelector("iframe");r&&i&&(r.remove(),i.remove(),this._createNumberFormField(t),this._createCvvFormField(n))}},{key:"_createNumberFormField",value:function(e){var t=document.createElement("input");t.setAttribute("inputmode","numeric"),t.setAttribute("type","text"),t.setAttribute("name","card_number"),t.setAttribute("pattern","[0-9 *]*"),t.setAttribute("size","19"),t.style.cssText=this.fjs.conf.number.ocrStyle,e.appendChild(t)}},{key:"_createCvvFormField",value:function(e){var t=document.createElement("input");t.setAttribute("inputmode","numeric"),t.setAttribute("type","text"),t.setAttribute("name","card_cvv"),t.setAttribute("pattern","[0-9 *]*"),t.setAttribute("size","4"),t.style.cssText=this.fjs.conf.cvv.ocrStyle,e.appendChild(t)}},{key:"_clearDrawCanvas",value:function(){var e=document.getElementById("ocr-camera-feedback"),t=e.getContext("2d");e.width=e.clientWidth,e.height=e.clientHeight,t.clearRect(0,0,e.width,e.height)}},{key:"_disableOcr",value:function(){this.allow_ocr_tokenization=!1,this.fjs.emit("ocr_error",{message:"OCR is not supported"});var e=document.getElementById("ocr-loading");e&&(e.style.display="none")}},{key:"ocrDrawBox",value:function(e){var t=document.getElementById("ocr-loading");t&&(t.style.display="none");var n=document.getElementById("ocr-camera-feedback").getContext("2d"),r=e.detectionStatus,i="yellow";0===r?i="red":1===r&&(i="green");var o=document.getElementById("ocr-statusbar"),a="";switch(r){case 0:a="Card not visible";break;case BlinkCardSDK.DetectionStatus.CameraTooHigh:a="Camera too high";break;case BlinkCardSDK.DetectionStatus.Partial:a="Camera is only able to detect a partial image";break;case BlinkCardSDK.DetectionStatus.CameraAtAngle:a="Camera angle is off. Reposition card.";break;case BlinkCardSDK.DetectionStatus.CameraTooNear:a="Card is too close to the camera. Move card away.";break;case BlinkCardSDK.DetectionStatus.DocumentTooCloseToEdge:a="Card is too close to the edge of the camera. Move card away.";break;default:a=""}a&&this.fjs.emit("ocr_status",{message:a}),o&&(a&&a.length>1?(o.style.display="block",o.innerHTML=a):o.style.display="none");var s=document.getElementById("ocr-toolbar");s&&(s.style.display="block"),this._clearDrawCanvas(),this.applyTransform(e.transformMatrix),n.beginPath(),n.fillStyle=i,n.strokeStyle=i,n.lineWidth=8,n.moveTo(e.topLeft.x,e.topLeft.y),n.lineTo(e.topRight.x,e.topRight.y),n.lineTo(e.bottomRight.x,e.bottomRight.y),n.lineTo(e.bottomLeft.x,e.bottomLeft.y),n.closePath(),n.stroke()}},{key:"applyTransform",value:function(e){var t=document.getElementById("ocr-camera-feedback"),n=t.getContext("2d"),r=document.getElementById("ocr-camera-feed"),i=t.width/t.height,o=r.videoWidth/r.videoHeight,a=0,s=0,c=0,u=0;i>o?(u=o*(c=t.height),a=(t.width-u)/2):(c=(u=t.width)/o,s=(t.height-c)/2),n.translate(a,s),n.scale(u/r.videoWidth,c/r.videoHeight),n.transform(e[0],e[3],e[1],e[4],e[2],e[5])}}]);var e,t,n,r,o,s,u,d,f}();var P,O={googlePay:{selector:"#pay-with-google",billingAddressRequired:!0,billingAddressParameters:{phoneNumberRequired:!0,format:"FULL"},emailRequired:!0,buttonType:"pay",buttonColor:"black",buttonLocale:"en"},applePay:{selector:"#pay-with-apple",requiredBillingContactFields:["postalAddress","name"],contactFields:["phone","email"],contactFieldsMappedTo:"billing",totalLabel:"Total",type:"plain"}},E=new Uint8Array(16);function A(){if(!P&&!(P="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P(E)}const z=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var D=[],I=0;I<256;++I)D.push((I+256).toString(16).substr(1));const B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(D[e[t+0]]+D[e[t+1]]+D[e[t+2]]+D[e[t+3]]+"-"+D[e[t+4]]+D[e[t+5]]+"-"+D[e[t+6]]+D[e[t+7]]+"-"+D[e[t+8]]+D[e[t+9]]+"-"+D[e[t+10]]+D[e[t+11]]+D[e[t+12]]+D[e[t+13]]+D[e[t+14]]+D[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&z.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},L=function(e,t,n){var r=(e=e||{}).random||(e.rng||A)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return B(r)};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?M(Object(r),!0).forEach((function(n){t()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=function(){return c()((function e(t,n,r,i,o){a()(this,e),this.clientId=t,this.token=n,this.merchantId=r,this.invoiceId=i.invoiceId,this.emitter=o,this.capturePayload={},this.total=0,this.tip=0,this.paypalActions=null,this.loadPayPalScriptPromise=this._loadPayPalScript(i.enableFunding||["venmo","paylater"])}),[{key:"_loadPayPalScript",value:(r=i()(l().mark((function e(t){var n,r,i,o,a=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="\n        https://www.paypal.com/sdk/js\n        ?client-id=".concat(this.clientId,"\n    "),r=["card"],t.includes("paylater")||r.push("paylater"),t.length>0&&(n+="&enable-funding=".concat(t.join(","))),r.length>0&&(n+="&disable-funding=".concat(r.join(","))),i=document.getElementsByTagName("head")[0],(o=document.createElement("script")).src=n.replace(/\s/g,""),i.appendChild(o),e.abrupt("return",new Promise((function(e,n){o.onload=function(){a.emitter.emit("paypal_script_loaded",{enableFunding:t}),e()},o.onerror=function(e){a.emitter.emit("paypal_error",e),n(e)}})));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_createPayPalOrder",value:(n=i()(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://transactions.fattlabs.com","/pay/initiate/").concat(this.merchantId),n={intent:"CAPTURE",purchase_units:[{reference_id:this.invoiceId||L(),amount:{value:this.total,currency_code:"USD"}}],tip:this.tip},e.prev=2,e.next=5,p.post(t,n);case 5:return r=e.sent,this.emitter.emit("paypal_order_create_success",r),e.abrupt("return",r.id);case 10:e.prev=10,e.t0=e.catch(2),this.emitter.emit("paypal_order_create_error",e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(){return n.apply(this,arguments)})},{key:"_capturePayPalOrder",value:(t=i()(l().mark((function e(t){var n,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=H({},this.capturePayload)).validate=void 0,n.total=this.total,n.token=this.token,this.tip&&(n.tip=this.tip),this.invoiceId?n.isHostedPayment=!1:(n.isHostedPayment=!0,n.channel="website-payment"),e.prev=6,r="".concat("https://transactions.fattlabs.com","/pay/capture/").concat(t.orderID),e.next=10,p.post(r,n);case 10:i=e.sent,this.emitter.emit("paypal_order_payment_success",i),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),this.emitter.emit("paypal_order_payment_error",e.t0);case 17:case"end":return e.stop()}}),e,this,[[6,14]])}))),function(e){return t.apply(this,arguments)})},{key:"_setPayPalActions",value:function(e){this.paypalActions=e}},{key:"showPayPalButtons",value:(e=i()(l().mark((function e(t,n){var r,i,o,a=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadPayPalScriptPromise;case 2:this.buttons&&(this.buttons.close(),n.emit("paypal_buttons_closed")),(r=document.querySelector(t.selector))&&(i=r.querySelectorAll(".paypal-buttons")).length&&(i.forEach((function(e){return e.remove()})),n.emit("paypal_buttons_closed")),o=window.paypal,this.buttons=o.Buttons({createOrder:function(){return a._createPayPalOrder()},onApprove:function(e){return a._capturePayPalOrder(e)},onInit:function(e,t){a._setPayPalActions(t),a.total<=0&&(t.disable(),n.emit("paypal_buttons_disabled","Empty paypal total"))},onClick:function(){a.total<=0&&n.emit("paypal_disabled_button_clicked","Empty paypal total")}}),n.emit("paypal_buttons_created",t.selector),this.buttons.render(t.selector),n.emit("paypal_buttons_rendered",t.selector);case 10:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"setTotal",value:function(e){this.paypalActions&&(e<=0?(this.paypalActions.disable(),this.emitter.emit("paypal_buttons_disabled","Empty paypal total")):(this.paypalActions.enable(),this.emitter.emit("paypal_buttons_enabled"))),this.total=e}},{key:"setTip",value:function(e){this.tip=e}},{key:"setInvoiceId",value:function(e){this.invoiceId=e}},{key:"setCapturePayload",value:function(e){if("object"!==f()(e))throw new Error("payload must be an object");this.capturePayload=e}}]);var e,t,n,r}(),N=n(263),F=n.n(N),V=n(917),W=n.n(V),q=n(440),G=n.n(q),K=n(454),U=n.n(K),X=function(){return c()((function e(t){a()(this,e),this.rules=t||{},this.errors=[]}),[{key:"validateRequired",value:function(e,t){null!=t&&""!==t||this.errors.push({field:e,message:"this field is is required (".concat(e,")")})}},{key:"validateInValues",value:function(e,t,n){t&&-1===n.indexOf(t)&&this.errors.push({field:e,message:"must be in ".concat(n.join(", "))})}},{key:"validateMaxLength",value:function(e,t,n){t&&t.length>n&&this.errors.push({field:e,message:"must be fewer than ".concat(t.length," characters")})}},{key:"validateHasLength",value:function(e,t,n){t&&t.length!==n&&this.errors.push({field:e,message:"must be exactly ".concat(t.length," characters")})}},{key:"validateRegex",value:function(e,t,n){t&&!n.test(t)&&this.errors.push({field:e,message:"this field is invalid"})}},{key:"validatePredicate",value:function(e,t,n){if(t){var r=n(t);"string"==typeof r?this.errors.push({field:e,message:r}):r||this.errors.push({field:e,message:"is invalid."})}}},{key:"validate",value:function(e){for(var t in this.rules){var n=this.rules[t],r=e[t];n.required&&this.validateRequired(t,r),n.inValues&&n.inValues.length&&this.validateInValues(t,r,n.inValues),Number.isInteger(+n.maxLength)&&this.validateMaxLength(t,r,+n.maxLength),Number.isInteger(+n.hasLength)&&this.validateHasLength(t,r,+n.hasLength),n.regex&&this.validateRegex(t,r,n.regex),n.predicate&&"function"==typeof n.predicate&&this.validatePredicate(t,r,n.predicate)}return 0===this.errors.length}}])}();function J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J=function(){return!!e})()}var $=function(e){function t(){return a()(this,t),e=this,n=t,r=[{}],n=W()(n),F()(e,J()?Reflect.construct(n,r||[],W()(e).constructor):n.apply(e,r));var e,n,r}return U()(t,e),c()(t,[{key:"getRulesForValues",value:function(e){var t="card"===e.method,n="bank"===e.method,r=!!e.customer_id;return{method:{required:!0,inValues:["bank","card"]},currency:{required:!1,inValues:["USD","CAD"]},firstname:{required:!r,maxLength:50},lastname:{required:!r,maxLength:50},email:{regex:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,maxLength:255},address_1:{required:!r,maxLength:255},address_2:{maxLength:255},address_city:{required:!r,maxLength:255},address_state:{required:!r,hasLength:2},address_zip:{required:!r,maxLength:16},address_country:{required:!r,hasLength:3},month:{required:t,predicate:function(e){switch(!0){case n:return!0;case isNaN(e):return"month must be a number";case+e>12||+e<1:return"month must be between 1 and 12";default:return!0}}},year:{required:t,predicate:function(e){switch(!0){case n:return!0;case isNaN(e):return"year must be a number";case+e<+(new Date).getFullYear():return"year must not be in the past";default:return!0}}},bank_account:{required:n},bank_routing:{required:n},bank_type:{required:n,inValues:["checking","savings"]},bank_holder_type:{required:n,inValues:["personal","business"]},total:{predicate:function(e){return!isNaN(e)||"must be a number"}},amount:{predicate:function(e){return!isNaN(e)||"must be a number"}}}}},{key:"validateCardExp",value:function(e){if("bank"!==e.method&&!e.is_using_existing_c2p_card&&!this.errors.some((function(e){return"month"===e.field||"year"===e.field}))){var t=e.month||"",n="20"+(e.year||"").slice(-2);+new Date(+n,+t)<+new Date&&this.errors.push({field:"month & year",message:"month & year must be a future date"})}}},{key:"validate",value:function(e){var n,r,i;this.rules=this.getRulesForValues(e),"USA"!==e.address_county&&delete this.rules.address_state,e.is_using_existing_c2p_card&&(delete this.rules.month,delete this.rules.year),(n=t,r=this,"function"==typeof(i=G()(W()(n.prototype),"validate",r))?function(e){return i.apply(r,e)}:i)([e]),this.validateCardExp(e)}}])}(X),Y=function(){return c()((function e(n,r){return a()(this,e),t()(this,"spreedly",void 0),t()(this,"fattjs",void 0),this.spreedly=n,this.fattjs=r,new Proxy(this,{get:function(e,t,r){if(t in e)return Reflect.get(e,t,r);var i=n[t];return"function"==typeof i?i.bind(n):i}})}),[{key:"registerEventListeners",value:(e=i()(l().mark((function e(){var t,n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.on("paymentMethod",(function(e){var t={id:e};n.fattjs.emit("tokenize",t)})),this.on("errors",(function(e){e.forEach((function(e){switch(e.key){case"errors.account_inactive":case"errors.environment_key_parameter_required":case"errors.unknown_referrer":case"errors.invalid_referrer":case"errors.configuration":case"errors.invalid_environment_key_parameter":n.fattjs.emit("error_tokenize",{code:"system_error",key:e.key,message:e.key});break;case"errors.blank":case"errors.invalid":case"errors.blank_card_type":case"errors.expired":var t={code:"logic_error",key:e.key,message:e.message,field:e.attribute},r=n.fattjs.mapGatewayVendorFieldToGivenFieldId(t.field);r&&(t.fieldErrors=[{field:r,message:e.message}]),n.fattjs.emit("error_tokenize",t);break;case"errors.checkout_code":n.fattjs.emit("error_tokenize",{code:"logic_error",key:e.key,message:e.message})}}))})),this.on("fieldEvent",(function(e,t,r,i){"focus"===t?n.fattjs.emit("card_form_".concat(e,"_focus")):"blur"===t&&n.fattjs.emit("card_form_".concat(e,"_blur")),void 0!==(null==i?void 0:i.validNumber)&&void 0!==(null==i?void 0:i.validCvv)&&("number"===e&&n.fattjs.conf.number?n.fattjs.emit("card_form_number_change",{validNumber:i.validNumber,cardType:i.cardType}):"cvv"===e&&n.fattjs.conf.cvv&&n.fattjs.emit("card_form_cvv_change",{validCvv:i.validCvv,cardType:i.cardType}),n.fattjs.validNumber===(null==i?void 0:i.validNumber)&&n.fattjs.validCvv===(null==i?void 0:i.validCvv)&&n.fattjs.cardType===(null==i?void 0:i.cardType)||(n.fattjs.emit(i.validNumber&&null!=i&&i.validCvv?"card_form_complete":"card_form_incomplete",{validNumber:null==i?void 0:i.validNumber,validCvv:null==i?void 0:i.validCvv,cardType:null==i?void 0:i.cardType}),n.fattjs.validNumber=null==i?void 0:i.validNumber,n.fattjs.validCvv=null==i?void 0:i.validCvv,n.fattjs.cardType=null==i?void 0:i.cardType))})),this.on("validation",(function(){})),this.on("consoleError",(function(){})),t=new Promise((function(e){var t=n.fattjs.on("ready",(function(){e(null),t()}))})),this.on("ready",(function(){n.setFieldType("number",n.fattjs.conf.number.type||"text"),n.setFieldType("cvv",n.fattjs.conf.cvv.type||"text"),n.setNumberFormat(n.fattjs.conf.number.format||"prettyFormat"),n.setStyle("number",n.fattjs.conf.number.style||""),n.setStyle("cvv",n.fattjs.conf.cvv.style||""),n.fattjs.conf.number.label&&n.setLabel("number",n.fattjs.conf.number.label),n.fattjs.conf.cvv.label&&n.setLabel("cvv",n.fattjs.conf.number.label),n.fattjs.conf.number.placeholder&&n.setPlaceholder("number",n.fattjs.conf.number.placeholder),n.fattjs.conf.cvv.placeholder&&n.setPlaceholder("cvv",n.fattjs.conf.cvv.placeholder),n.fattjs.conf.number.focus?n.transferFocus("number"):n.fattjs.conf.cvv.focus&&n.transferFocus("cvv"),n.fattjs.emit("ready",{})})),e.next=9,t;case 9:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e}(),Z=n(820),Q=n.n(Z);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(r),!0).forEach((function(n){t()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne=function(){return c()((function e(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a()(this,e),t()(this,"inputDiv",void 0),t()(this,"cvvDiv",void 0),t()(this,"valid",void 0),t()(this,"tokenizingKey",void 0),t()(this,"commonId",void 0),t()(this,"cardNumberIframeId",void 0),t()(this,"cvvIframeId",void 0),t()(this,"isTestMode",void 0),t()(this,"gatewayHost",void 0),t()(this,"testGatewayHost",void 0),t()(this,"iframeHost",void 0),this.inputDiv=null,this.cvvDiv=null,this.valid=!1,this.tokenizingKey=n,this.commonId=e.generateRandomAlphaString(10),this.cardNumberIframeId="number-".concat(this.commonId),this.cvvIframeId="cvv-".concat(this.commonId),this.isTestMode=r,i?(this.gatewayHost="https://api.dev.blockchyp.com",this.testGatewayHost="https://test.dev.blockchyp.com"):(this.gatewayHost="https://api.blockchyp.com",this.testGatewayHost="https://test.blockchyp.com"),this.iframeHost=r?this.testGatewayHost:this.gatewayHost}),[{key:"setValue",value:function(e,t){var n=null;if("number"===e?n=this.cardNumberIframeId:"cvv"===e&&(n=this.cvvIframeId),n){var r=document.getElementById(n);r&&r.contentWindow&&r.contentWindow.postMessage({type:"setValue",field:e,value:t},"*")}}},{key:"isValid",value:function(){return this.valid}},{key:"setStylesViaPostMessage",value:(e=i()(l().mark((function e(t,n){var r,i,o=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n||this.cardNumberIframeId,(i=document.getElementById(r))&&i.contentWindow){e.next=4;break}throw new Error("BlockChyp iframe with ID ".concat(r," not found or not accessible"));case 4:return e.abrupt("return",new Promise((function(e,n){var r=setTimeout((function(){window.removeEventListener("message",a),n(new Error("Style application timeout - no response from iframe"))}),5e3),a=function(t){t.origin===o.iframeHost&&t.data&&"stylesApplied"===t.data.message&&(clearTimeout(r),window.removeEventListener("message",a),t.data.success?(console.log("BlockChyp styles applied successfully via postMessage"),e(!0)):(console.error("BlockChyp style application failed:",t.data),n(new Error("Style application failed"))))};window.addEventListener("message",a);try{if(!i.contentWindow)throw new Error("Iframe contentWindow is not available");i.contentWindow.postMessage({message:"setStyles",styles:t},o.iframeHost)}catch(e){clearTimeout(r),window.removeEventListener("message",a),n(e)}})));case 5:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"isUrlTooLong",value:function(e){return e.length>200}},{key:"buildBasicIframe",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=document.createElement("iframe");i.setAttribute("style","margin: 0; padding: 0;"),i.setAttribute("sandbox","allow-scripts allow-same-origin"),i.setAttribute("name",t),i.setAttribute("id",t),i.setAttribute("frameBorder","0"),i.setAttribute("scrolling","no"),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("src",function(){var e="".concat(n.iframeHost,"/secure-input?key=").concat(n.tokenizingKey),t="",i=r.style,o=i&&n.isUrlTooLong(i);if(r){var a=o?te(te({},r),{},{style:void 0}):r;t="&options="+btoa(JSON.stringify(a))}return"".concat(e).concat(t,"&origin=").concat(encodeURI(window.location.href))}()),e.appendChild(i);var o=r.style;return o&&this.isUrlTooLong(o)&&i.addEventListener("load",(function(){console.log("Applying styles via postMessage for iframe:",t),n.setStylesViaPostMessage(o,t).then((function(){console.log("BlockChyp styles applied via postMessage for iframe:",t)})).catch((function(e){console.error("Failed to apply BlockChyp styles via postMessage:",e)}))})),i}},{key:"render",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this,i=document.getElementById(e),o=document.getElementById(t);if(!i||!o)throw new Error("BlockChypTokenizer: Could not find elements with IDs ".concat(e," or/and ").concat(t,". Please ensure they exist in the DOM."));if(this.inputDiv=i,this.cvvDiv=o,this.buildBasicIframe(o,this.cvvIframeId,te(te({},n),{},{cardLogo:!1,cardNumber:!1,expirationDate:!1,cvv:!0,cardNumberIframeId:this.cardNumberIframeId,cvvIframeId:this.cvvIframeId,logging:!0})),this.buildBasicIframe(i,this.cardNumberIframeId,te(te({},n),{},{cardLogo:!1,cvv:!1,expirationDate:!1,cardNumberIframeId:this.cardNumberIframeId,cvvIframeId:this.cvvIframeId,logging:!0})),document.getElementById(e+"-error")){var a=document.getElementById(e+"-error");a&&(a.style.display="none")}window.addEventListener("message",(function(t){if(t.data.message&&"validate"===t.data.message){var n=document.getElementById(e);if(!n)return void console.error("BlockChypTokenizer: Could not find inputDiv with ID ".concat(e,"."));var i=document.getElementById(r.inputDiv+"-error");t.data.valid?(r.valid=!0,n.style.borderColor="",i&&(i.style.display="none")):(r.valid=!1,n.style.borderColor="red",i&&(i.style.display="block",i.innerText=t.data.error))}}))}},{key:"on",value:function(e,t){var n=function(n){n.data&&"object"===f()(n.data)&&"message"in n.data&&n.data.message===e&&t(n.data)};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}},{key:"tokenize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=this.iframeHost,r=document.getElementById(t.inputDiv+"-error");return r&&(r.style.display="none"),new Promise((function(r,i){try{var o=function(e){if(e.origin===t.iframeHost)if("validate"!==e.data.message){if(!e.data.message)if(console.log("Response: "+JSON.stringify(e.data)),window.removeEventListener("message",o),e.data.success&&e.data.approved)r(e.data);else{if(document.getElementById(t.inputDiv+"-error")){var n=document.getElementById(t.inputDiv+"-error");n&&(n.style.display="block",n.innerText=e.data.responseDescription||e.data.error||"Tokenization failed")}i(e.data)}}else if(!e.data.valid){if(window.removeEventListener("message",o),document.getElementById(t.inputDiv+"-error")){var a=document.getElementById(t.inputDiv+"-error");a&&(a.style.display="block",a.innerText=e.data.error)}i({success:!1,error:e.data.error,responseDescription:e.data.error})}};window.addEventListener("message",o),e.origin=window.location.origin;var a=document.getElementById(t.cardNumberIframeId);a&&a.contentWindow?(a.contentWindow.postMessage(e,n),console.log("sent message to blockchyp frame",n)):i(new Error("Card number iframe or its contentWindow is not available."))}catch(e){console.error("in catch block"),console.error(e),i(e)}}))}}],[{key:"generateRandomAlphaString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n=0;n<e;n++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));return t}},{key:"convertStaxJsStylesToBlockchypFormat",value:function(e){var t={};return e.split(";").forEach((function(e){if(e.trim()){var n=e.split(":").map((function(e){return e.trim()})),r=Q()(n,2),i=r[0],o=r[1];t[i]=o}})),t}}]);var e}(),re=function(){return c()((function e(n,r){a()(this,e),t()(this,"fmService",void 0),t()(this,"blockChypTokenizer",void 0),this.fmService=n,this.blockChypTokenizer=r}),[{key:"loadBlockChypCardFields",value:(n=i()(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlockchypTokenizer();case 2:n=e.sent;try{n.render(t.number.id,t.cvv.id,{framework:"none",style:"\n              #secure-input {margin: 0; padding: 0; font-size: inherit;}\n              #secure-input #cvv {\n                margin: 0;\n                ".concat(t.cvv.style,"\n              }\n              #secure-input #pan {\n                margin: 0;\n                ").concat(t.number.style,"\n              }\n            ")})}catch(e){console.log("Encountered error rendering vendor tokenizer")}case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getBlockchypTokenizer",value:(e=i()(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.blockChypTokenizer){e.next=2;break}return e.abrupt("return",this.blockChypTokenizer);case 2:return e.next=4,this.fmService.getVendorConfig();case 4:return t=e.sent,this.blockChypTokenizer=new ne(t.tokenizingKey,!!t.isSandbox,t.useDev()),e.abrupt("return",this.blockChypTokenizer);case 7:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,n}(),ie=function(){return c()((function e(n,r,i){a()(this,e),t()(this,"tokenizer",void 0),t()(this,"vendorConfig",void 0),t()(this,"fattjs",void 0),t()(this,"handlerCleanups",[]),this.tokenizer=n,this.vendorConfig=r,this.fattjs=i}),[{key:"tokenizeCreditCard",value:(r=i()(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.tokenizer.tokenize({cardholderName:"".concat(t.first_name," ").concat(t.last_name),test:this.vendorConfig.isSandbox,expMonth:t.month,expYear:t.year,postalcode:t.zip,address:t.address_1,country:t.country});case 3:(n=e.sent).success?this.fattjs.emit("tokenize",{id:n.token}):this.fattjs.emit("error_tokenize",{code:"logic_error",key:"error.tokenize_failed",message:n.responseDescription}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.fattjs.emit("error_tokenize",{code:"system_error",key:"error.tokenize",message:null!==(r=null===e.t0||void 0===e.t0?void 0:e.t0.responseDescription)&&void 0!==r?r:"Failed to tokenize"});case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return r.apply(this,arguments)})},{key:"reload",value:(n=i()(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"on",value:function(e,t){var n=this.tokenizer.on(e,t);return this.handlerCleanups.push(n),n}},{key:"registerEventListeners",value:(e=i()(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.on("paymentMethod",(function(e){var n={id:e};t.fattjs.emit("tokenize",n)})),this.on("fieldEvent",(function(e){var n=e.type,r=e.field;"focus"===n?t.fattjs.emit("card_form_".concat(r,"_focus")):"blur"===n&&t.fattjs.emit("card_form_".concat(r,"_blur"))})),this.on("validate",(function(e){var n=e.message,r=e.field,i=e.error,o=e.cardType,a=e.validNumber,s=e.validCvv;if(i){var c={code:"logic_error",key:"".concat(r,".").concat(n),message:i.message,field:r},u=t.fattjs.mapGatewayVendorFieldToGivenFieldId(c.field);u&&(c.fieldErrors=[{field:u,message:i.message}]),t.fattjs.emit("error_tokenize",c)}"number"===r?s=t.fattjs.validCvv:"cvv"===r&&(a=t.fattjs.validNumber),void 0!==a&&void 0!==s&&("number"===r&&t.fattjs.conf.number?t.fattjs.emit("card_form_number_change",{validNumber:a,cardType:o}):"cvv"===r&&t.fattjs.conf.cvv&&t.fattjs.emit("card_form_cvv_change",{validCvv:s,cardType:o}),(t.fattjs.validNumber!==a||t.fattjs.validCvv!==s||t.fattjs.cardType!==o&&"number"===r)&&(t.fattjs.emit(a&&s?"card_form_complete":"card_form_incomplete",{validNumber:a,validCvv:s,cardType:o}),t.fattjs.validNumber=a,t.fattjs.validCvv=s,t.fattjs.cardType=o))})),this.on("cardType",(function(e){var n=e.cardType;t.fattjs.emit(t.fattjs.validNumber&&t.fattjs.validCvv?"card_form_complete":"card_form_incomplete",{validNumber:t.fattjs.validNumber,validCvv:t.fattjs.validCvv,cardType:n})})),this.on("consoleError",(function(){}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"removeHandlers",value:function(){this.handlerCleanups.forEach((function(e){return e()})),this.handlerCleanups=[]}},{key:"setValue",value:function(e,t){return this.tokenizer.setValue(e,t)}},{key:"init",value:function(e,t){console.log("[BlockChypClient] init")}}]);var e,n,r}();function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?oe(Object(r),!0).forEach((function(n){t()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}n(994);var se=window.GatewayVendor,ce=function(){return c()((function e(t,n){a()(this,e),n=w(O,n),this.fields={numberEl:n.cardField,cvvEl:n.cvvField},this.listeners=new Set,this.validNumber=!1,this.validCvv=!1,this.cardType=null,this.overrideKey=n.overrideKey,this.conf=n,this.fmservice=new j(t,n.api_endpoint||"https://apiprod.fattlabs.com",this),this.ocrMode=!1,this.webpaymentsToken=t,this._loadRecaptchaScript(),this.conf.ocr||(this.conf.ocr={number:{},ocr:{}})}),[{key:"mapGatewayVendorFieldToGivenFieldId",value:function(e){return{number:this.conf.number&&this.conf.number.id,cvv:this.conf.cvv&&this.conf.cvv.id,year:this.conf.year&&this.conf.year.id,month:this.conf.month&&this.conf.month.id}[e]}},{key:"hasDigitalWalletToken",value:function(){return!!this.fmservice.digitalWalletToken}},{key:"getTotal",value:function(){return this.getPrice()}},{key:"getAmount",value:function(){return this.getPrice()}},{key:"getPrice",value:function(){return this.conf.price}},{key:"setAmount",value:function(e){return this.setPrice(e)}},{key:"setTotal",value:function(e){return this.setPrice(e)}},{key:"setPrice",value:function(e){try{"string"!=typeof e&&(e=e.toString());var t=e.replace(/[^0-9.]+/g,""),n=t.split(".");if(!t||!n||n.length>2||n[1]&&n[1].length>2||parseFloat(t,10)<.01)throw"invalid price";return this.conf.price=e.toString(),window.CollectJS&&window.CollectJS.configure({price:this.conf.price}),this.paypalHelper&&this.paypalHelper.setTotal(this.conf.price),this.emit("set_price",this.conf.price),!0}catch(t){return console.log("Invalid price passed: "+e),this.conf.price=null,window.CollectJS&&window.CollectJS.configure({price:this.conf.price}),this.paypalHelper&&this.paypalHelper.setTotal(this.conf.price),!1}}},{key:"setTip",value:function(e){this.paypalHelper&&this.paypalHelper.setTip(e)}},{key:"appendReCAPTCHATerms",value:function(e){var t=document.getElementById(e);if(!t)return console.error('Unable to find element with id="'.concat(e,'"')),!1;try{return t.innerHTML='This site is protected by reCAPTCHA and the Google <a href="'.concat("https://policies.google.com/privacy",'" target="_blank">Privacy Policy</a> and <a href="').concat("https://policies.google.com/terms",'" target="_blank">Terms of Service</a> apply.'),!0}catch(e){return console.error("Unable to append reCAPTCHA terms."),!1}}},{key:"setEmail",value:(m=i()(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"string"==typeof t){e.next=2;break}return e.abrupt("return");case 2:if(/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test(t)){e.next=5;break}return e.abrupt("return");case 5:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)})},{key:"setPayPalTransactionPayload",value:function(e){this.paypalCapturePayload=e,this.paypalHelper&&this.paypalHelper.setCapturePayload(e)}},{key:"setPayPalTransactionInvoiceId",value:function(e){this.paypalInvoiceId=e,this.paypalHelper&&this.paypalHelper.setInvoiceId(e)}},{key:"appendBadgeHideCSS",value:function(){var e=document.createElement("style");e.innerHTML=".grecaptcha-badge { visibility: hidden; }",document.body.appendChild(e)}},{key:"showCardForm",value:(p=i()(l().mark((function e(){var t,n,r,o,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fmservice.getVendorConfig();case 2:if(t=e.sent,n=null,!t.shouldUseBlockChyp()){e.next=15;break}return console.log("Vendor lookup complete: using BlockChyp"),r=new ne(t.tokenizingKey,!!t.isSandbox,t.useDev()),o=new re(this.fmservice,r),e.next=10,o.loadBlockChypCardFields(this.conf);case 10:a=new ie(r,t,this.fmservice.fjs),window.GatewayVendor=a,se=window.GatewayVendor,e.next=21;break;case 15:return console.log("Vendor lookup complete: using Spreedly"),e.next=18,this._loadSpreedlyScript();case 18:window.GatewayVendor=new Y(Spreedly,this),se=window.GatewayVendor,n=this.overrideKey?this.overrideKey:"zpxFDZAKCI522f7ZhB4PXCbSpj";case 21:return e.next=23,this._deregisterEventListeners();case 23:return se.init(n,{numberEl:this.conf.number.id,cvvEl:this.conf.cvv.id}),this.validNumber=!1,this.validCvv=!1,e.next=28,se.registerEventListeners();case 28:return this.emit("card_form_incomplete",{validNumber:!1,validCvv:!1}),e.abrupt("return",{setTestPan:function(e){se.setValue("number",e)},setTestCvv:function(e){se.setValue("cvv",e)},reload:function(){return i()(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se.reload();case 1:case"end":return e.stop()}}),e)})))()}});case 30:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"showPayPalButtons",value:(f=i()(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fmservice.getMerchantPromise;case 2:if((n=this.fmservice.merchant||{}).allow_paypal){e.next=6;break}return this.emit("paypal_error",{message:"PayPal not supported for this merchant"}),e.abrupt("return");case 6:return this.paypalHelper||(this.paypalHelper=new R(n.paypal_client_id,this.webpaymentsToken,n.id,t,this)),this.setPrice(this.conf.price),e.next=10,this.paypalHelper.showPayPalButtons(t,this);case 10:this.paypalInvoiceId&&this.paypalHelper.setInvoiceId(this.paypalInvoiceId),this.paypalCapturePayload&&this.paypalHelper.setCapturePayload(this.paypalCapturePayload);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"ocrTokenize",value:(d=i()(l().mark((function e(t){var n,r,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.getElementById(this.conf.number.id).querySelector("input[name=card_number]").value.replace(/\s/g,""),r=document.getElementById(this.conf.cvv.id).querySelector("input[name=card_cvv]").value,16===n.length){e.next=5;break}return this.emit("ocr_error",{message:"Card number length must be 16 digits"}),e.abrupt("return");case 5:if(3===r.length){e.next=8;break}return this.emit("ocr_error",{message:"Card cvv length must be 3 digits"}),e.abrupt("return");case 8:return i=ae(ae({},t),{},{tokenize:!0,card_exp:t.month.padStart(2,"0")+t.year.slice(-2),person_name:"".concat(t.firstname," ").concat(t.lastname),card_number:n,card_cvv:r,phone:t.phone.replace(/[- )(]/g,"")}),e.prev=9,e.next=12,this.fmservice.webPaymentPost("/tokenize",i,"ocr_tokenize");case 12:if(!(o=e.sent)||!o.id){e.next=19;break}return t.payment_method_id=o.id,this.emit("ocr_tokenized",{message:"Payment method successfully tokenized",id:o.id,record:o}),e.abrupt("return",o);case 19:this.emit("orc_tokenization_failure",{message:"Payment method tokenization failed"});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),console.log(e.t0);case 25:return e.abrupt("return",!1);case 26:case"end":return e.stop()}}),e,this,[[9,22]])}))),function(e){return d.apply(this,arguments)})},{key:"pay",value:(u=i()(l().mark((function e(t){var n,r,i,o,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ocrMode||"card"!==t.method){e.next=7;break}return e.next=3,this.ocrTokenize(t);case 3:if(n=e.sent){e.next=6;break}throw{code:"tokenization_error",message:"failed to tokenize via ocr"};case 6:t.payment_method_id=n.id;case 7:if(r=!!t.payment_method_id,i=ae({first_name:t.firstname,last_name:t.lastname,address1:t.address_1,address2:t.address_2,city:t.address_city,state:t.address_state,zip:t.address_zip,country:t.address_country},t),!(t&&t.payment_token&&t.validate)||t.payment_token.startsWith("nmi_")){e.next=15;break}if((o=new $(t)).validate(t),!o.errors.length){e.next=15;break}throw{code:"logic_error",message:1===o.errors.length?o.errors[0].message:"One or more fields failed validation.",fieldErrors:o.errors};case 15:if(a={},r||t.payment_token){e.next=27;break}if("bank"!==t.method){e.next=23;break}return e.next=20,this._tokenizeBank(i);case 20:a=e.sent,e.next=26;break;case 23:return e.next=25,this._tokenizeCard(i);case 25:a=e.sent;case 26:t.payment_token=a.id;case 27:return e.next=29,this.fmservice.createWebPayment(t);case 29:return e.abrupt("return",e.sent);case 30:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"tokenize",value:(s=i()(l().mark((function e(t){var n,r,i,o,a,s,c=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:"",!this.ocrMode||"card"!==t.method){e.next=8;break}return e.next=4,this.ocrTokenize(t);case 4:if((r=e.sent)&&r.id){e.next=7;break}throw{code:"tokenization_error",message:"failed to tokenize via ocr"};case 7:return e.abrupt("return",r);case 8:if(i=ae({first_name:t.firstname,last_name:t.lastname,address1:t.address_1,address2:t.address_2,city:t.address_city,state:t.address_state,zip:t.address_zip,country:t.address_country},t),!t.validate){e.next=15;break}if((o=new $(t)).validate(t),!o.errors.length){e.next=15;break}throw{code:"logic_error",message:1===o.errors.length?o.errors[0].message:"One or more fields failed validation.",fieldErrors:o.errors};case 15:if(a={},"bank"!==t.method){e.next=22;break}return e.next=19,this.fmservice.tokenizeWebPaymentMethod(t,n);case 19:s=e.sent,e.next=29;break;case 22:return e.next=24,this._tokenizeCard(i);case 24:return a=e.sent,t.payment_token=a.id,e.next=28,this.fmservice.tokenizeWebPaymentMethod(t,n);case 28:s=e.sent;case 29:return e.abrupt("return",s);case 30:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"_tokenizeCard",value:(o=i()(l().mark((function e(t){var n,r,i,o,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){},r=function(){},i=this,o=new Promise((function(e,t){n=i.on("tokenize",(function(t){e(t)})),r=i.on("error_tokenize",(function(e){t(e)}))})),t.token_type&&(!t.payment_token||t.payment_token.startsWith("nmi_"))){e.next=26;break}e.prev=5,se.tokenizeCreditCard(t),e.next=17;break;case 9:if(e.prev=9,e.t0=e.catch(5),!(e.t0&&e.t0.message&&e.t0.message.indexOf("not defined")>-1)){e.next=16;break}throw{code:"fatal_error",message:"Error: showCardForm() not called. Please ensure you are calling showCardForm() before calling pay()."};case 16:throw e.t0;case 17:return e.prev=17,e.next=20,o;case 20:return a=e.sent,e.abrupt("return",a);case 22:return e.prev=22,n(),r(),e.finish(22);case 26:case"end":return e.stop()}}),e,this,[[5,9],[17,,22,26]])}))),function(e){return o.apply(this,arguments)})},{key:"_tokenizeBank",value:(r=i()(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fmservice.tokenizeWebPaymentMethod(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_loadRecaptchaScript",value:(n=i()(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fmservice.recaptchaService.initialize({reCAPTCHATermsElementID:this.conf.reCAPTCHATermsElementID,appendReCAPTCHATerms:this.appendReCAPTCHATerms.bind(this),appendBadgeHideCSS:this.appendBadgeHideCSS.bind(this)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_loadSpreedlyScript",value:(t=i()(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.Spreedly){e.next=2;break}return e.abrupt("return");case 2:return(t=document.createElement("script")).src="https://core.spreedly.com/iframe/iframe-v1.min.js",document.getElementsByTagName("head")[0].appendChild(t),e.abrupt("return",new Promise((function(e,n){t.onerror=n,t.onload=e})));case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"_deregisterEventListeners",value:function(){se.removeHandlers()}},{key:"reviewSurcharge",value:(e=i()(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fmservice.calculateSurcharge(t,n);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),r=[],e.t0.payment_method_id&&r.push(e.t0.payment_method_id),e.t0.total&&r.push(e.t0.total),new Error(r.join(" "));case 12:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(t,n){return e.apply(this,arguments)})},{key:"on",value:function(e,t){var n=this,r={event:e,handler:t};return this.listeners.add(r),function(){n.listeners.delete(r)}}},{key:"emit",value:function(e,t){this.listeners.forEach((function(n){n.event===e?n.handler(t):"card_form_uncomplete"===n.event&&"card_form_incomplete"===e&&(console.warn("event `card_form_uncomplete` is deprecated and will be removed in a future version. please use the new event `card_form_incomplete`"),n.handler(t))}))}},{key:"ocrCancel",value:function(){this.fmservice._ocrCancel.bind(this.fmservice)()}},{key:"ocr",value:function(e){this.fmservice.initializeOcr(e.formId),this.ocrMode=!0}}]);var e,t,n,r,o,s,u,d,f,p,m}();window.FattJs=ce,window.StaxJs=ce})()})();