!function(){var t={637:function(){Array.from||(Array.from=function(t){return[].slice.call(t)}),Array.prototype.includes||(Array.prototype.includes=function(t,e){return-1!==this.indexOf(t,e)}),NodeList.prototype.forEach||(NodeList.prototype.forEach=Array.prototype.forEach),String.prototype.includes||(String.prototype.includes=function(t,e){return void 0===e&&(e=0),-1!==this.indexOf(t,e)})}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}!function(){"use strict";n(637);var t=function(){function t(){}return t.prototype.hasClass=function(t,e){return t.className.split(" ").indexOf(e)>-1},t.prototype.addClass=function(t,e){t.className.split(" ").indexOf(e)>-1||(t.className+=" ".concat(e||""),t.className=t.className.trim())},t.prototype.removeClass=function(t,e){var n=new RegExp(e,"g");t.className=t.className.replace(n,"").trim()},t.prototype.get=function(t){return document.querySelector(t)},t.prototype.getAll=function(t){return document.querySelectorAll(t)},t.prototype.createElement=function(t,e){var n=document.createElement(t);if(e)for(var r in e)r&&n.setAttribute(r,e[r]);return n},t.prototype.scrollTo=function(t,e){t.scrollTop=e},t.prototype.addStyleLink=function(t,e){var n=this.createElement("link");n.rel="stylesheet",n.type="text/css",n.media="all",n.href=e,t.appendChild(n)},t.prototype.addEvent=function(t,e,n){t.addEventListener(e,n,!1)},t.prototype.appendToBody=function(t){document.body.appendChild(t)},t}(),e=function(){function t(t){this.localStorage=t}return t.prototype.landing=function(){return this.localStorage.readCookie("calltrk_landing")||document.URL},t.prototype.referrer=function(){return this.localStorage.readCookie("calltrk_referrer")||this.currentReferrer()},t.prototype.currentReferrer=function(){return this.getURLParameter("utm_referrer")||document.referrer||"direct"},t.prototype.getURLParameter=function(t){var e=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[null,""];return decodeURIComponent(e[1].replace(/\+/g,"%20"))||null},t}(),r=function(){function t(){}return t.prototype.readCookie=function(t){return CallTrkSwap.readCookie(t)},t}(),o=function(){function t(){this.callTrk=window.CallTrk||CallTrk,this.callTrkSwap=window.CallTrkSwap||CallTrkSwap,this.firstNamespace=this.callTrkSwap.firstNamespace(),this.sessionId=this.callTrkSwap.getSessionID(),this.companyId=this.firstNamespace.id,this.baseUrl=this.getBaseUrl(this.endpoint)}return t.prototype.getBaseUrl=function(t){return t.match(/.*\/\/[^\/]+/)[0]},Object.defineProperty(t.prototype,"endpoint",{get:function(){return this.firstNamespace.endpoints.chat||this.firstNamespace.endpoints.contact||this.firstNamespace.endpoints.form_capture||this.firstNamespace.endpoints.custom_forms||this.firstNamespace.endpoints.external_forms||this.firstNamespace.endpoints.cr_form||this.firstNamespace.endpoints.external_chats||this.firstNamespace.endpoints.click_to_contact},enumerable:!1,configurable:!0}),t}(),i=function(){function t(){}return Object.defineProperty(t.prototype,"xhr",{get:function(){return new XMLHttpRequest},enumerable:!1,configurable:!0}),t}(),a=function(){function t(t,e){this.httpBackend=t,this.url=e}return t.prototype.post=function(t,e,n,r,o){var i=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){i.request("POST",t,e,n,r,o)},this.timeout?1e3:0),setTimeout(function(){i.timeout=null},1e3)},t.prototype.request=function(t,e,n,r,o,i){var a;i=i||{"Content-Type":"application/x-www-form-urlencoded"};var s=this.httpBackend.xhr;"GET"===t&&n&&(e="".concat(e,"?").concat(this.url.paramsString(n))),s.open(t,e);for(var u=0,c=Object.keys(i);u<c.length;u++){var l=c[u];s.setRequestHeader(l,i[l])}s.onload=function(){if(this.status>=200&&this.status<300)r(JSON.parse(s.response));else{var t=JSON.parse(s.response||null),e=t?t.error:"";o({status:this.status,statusText:s.statusText,message:e||""})}},s.onerror=function(){o({status:this.status,statusText:s.statusText})},a="text/plain"===i["Content-Type"]?JSON.stringify(n):this.url.paramsString(n),s.send("POST"===t?a:"")},t}(),s=function(){function t(){}return t.log=function(t,e){void 0===e&&(e="swap"),CallTrkSwap._isDebug&&CallTrkSwap._log.push("".concat(e,": ").concat(t))},t}(),u=function(){function t(){}return t.prototype.domain=function(t){var e=(t||"").match(/(.*\/\/)([^\/]+)/);return e?e[2]:""},t.prototype.paramsString=function(t){return t?Object.keys(t).map(function(e){var n=null==t[e]?"":t[e];return encodeURIComponent(e)+"="+encodeURIComponent(String(n))}).join("&"):""},t}(),c=function(){function t(){this.settings={}}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.set=function(t,e){this.settings[t]=e},t.prototype.get=function(t){return this.settings[t]},t}(),l=["__EVENTTARGET","__VIEWSTATE","__EVENTVALIDATION","__VIEWSTATEGENERATOR","__EVENTARGUMENT","utf8"],p=function(){function t(e,n){this.input=e,this.form=n,t.fieldNum++}return Object.defineProperty(t.prototype,"value",{get:function(){var t;if(this.valid)return(t={})[this.formattedName]=this.input.value,t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formattedName",{get:function(){var t=this.parseName;return this.sanitizeName(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return[!this.input.value||!this.input.value.length,l.includes(this.input.getAttribute("name")),this.checkboxOrRadio()&&!this.input.checked,null!=this.input.getAttribute("data-cr-no-capture"),"submit"===this.input.type,"button"===this.input.type].every(function(t){return!t})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parseName",{get:function(){var t=this;return[this.labelName,this.placeholder,this.input.name].filter(function(e){return t.validLabelName(e)})[0]||this.labelName||this.placeholder||this.input.name||this.artificialName},enumerable:!1,configurable:!0}),t.prototype.validLabelName=function(t){if(!t)return!1;var e=t.replace(/[^a-zA-Z]/g,"");return e&&e.length>2},t.prototype.sanitizeName=function(t){if(t)return t.replace(/(\[|\])+/g," ").replace(/\n+/g,"").replace(/:?\s*$/,"").replace(/^\s+/,"").replace(/^\*\s+/,"")},Object.defineProperty(t.prototype,"labelName",{get:function(){return this.checkboxOrRadio()?this.checkboxOrRadioLabelName:this.possibleLabelName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"checkboxOrRadioLabelName",{get:function(){var t=this.form.querySelector('label[for="'.concat(this.inputNameOrZeroId(),'"]'));return t?t.innerText:void 0},enumerable:!1,configurable:!0}),t.prototype.inputNameOrZeroId=function(){return this.input.getAttribute("name")||this.input.id.replace(/(_|\d)+$/,"")+"_0"},Object.defineProperty(t.prototype,"possibleLabelName",{get:function(){var t=this.form.querySelector('label[for="'.concat(this.input.getAttribute("id"),'"]')),e=this.input.parentElement;return e&&"LABEL"===e.nodeName&&(t=e),t&&this.isDropDown()?t.firstChild.textContent:t?t.innerText:this.unattachedLabelName()},enumerable:!1,configurable:!0}),t.prototype.unattachedLabelName=function(){var t=this.input.previousElementSibling;if(t&&"label"===t.localName)return this.input.previousElementSibling.innerHTML},Object.defineProperty(t.prototype,"placeholder",{get:function(){if(!this.checkboxOrRadio())return this.input.getAttribute("placeholder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"artificialName",{get:function(){return"form_field_".concat(t.fieldNum)},enumerable:!1,configurable:!0}),t.prototype.checkboxOrRadio=function(){return["radio","checkbox"].includes(this.input.type)},t.prototype.isDropDown=function(){return"SELECT"===this.input.nodeName},t.fieldNum=0,t}(),f=function(){return f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},f.apply(this,arguments)},h=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},m=["placeholder","data-label-inside","type"],d=["input","select","textarea"],y=function(){function t(){}return t.prototype.parseFormContent=function(t){var e=this.formInputs(t),n=[],r=e.reduce(function(r,o,i){var a=new p(o,t),s=a.value;n.push(a.formattedName);var u=Object.keys(s||{})[0];if(r[u]&&i>0){if(o=o.cloneNode(),["radio","checkbox"].includes(o.type))o.value=[r[u],o.value].join(", ");else{var c=e.filter(function(t){return t.name===o.name}).length;o.name="".concat(o.name,"(").concat(c,")")}s=new p(o,t).value}return f(f({},r),s)},e[0]);return this.filterContentsByName(r,n)},t.prototype.parseInputMetadata=function(t){var e=this,n=this.formInputs(t),r=[],o=n.reduce(function(t,n){return r.push(n.name),f(f({},t),e.singleInputMetadata(n))},n[0]);return this.filterContentsByName(o,r)},t.prototype.parseFormMetadata=function(t){if(!t.attributes||!t.attributes.length)return{};var e=Array.from(t.attributes),n=[],r=e.reduce(function(t,e){var r;return n.push(e.name),f(f({},t),((r={})[e.nodeName]=e.nodeValue,r))},e[0]);return this.filterContentsByName(r,n)},t.prototype.singleInputMetadata=function(t){var e;if(t){var n=m.map(function(e){var n,r=t.attributes[e];if(r&&r.nodeValue&&r.nodeValue.length)return(n={})[r.nodeName]=r.nodeValue,n}).reduce(function(t,e){return f(f({},t),e)});return t.name?((e={})[t.name]=Object.keys(n).length>0?f({},n):{},e):void 0}},t.prototype.formInputs=function(t){var e=t.querySelectorAll(d.map(function(t){return t+':not([type="hidden"], [type="password"], [name="password"])'}).join(", ")),n=t.querySelectorAll(d.map(function(t){return t+'[type="hidden"]:not([name="password"])'}).join(", "));return h(h([],Array.from(e),!0),Array.from(n),!0)},t.prototype.filterContentsByName=function(t,e){var n={};for(var r in t)t[r]&&e.includes(r)&&(n[r]=t[r]);return n},t}(),g=function(){return g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},g.apply(this,arguments)},b=function(){function t(t,e,n,r,o){this.context=t,this.url=e,this.formContentParser=n,this.http=r,this.ls=o,this.context=t||c.getInstance(),this.url=e||new u,this.formContentParser=n||new y,this.http=r||new a(new i,this.url),this.ls=o||localStorage}return t.prototype.submitForm=function(t){var e=this.formContentParser.parseFormContent(t)||{},n=this.formContentParser.parseFormMetadata(t)||{},r=this.formContentParser.parseInputMetadata(t)||{};this.sendFormCaptureRequest({form:e,form_metadata:n,metadata:r})},t.prototype.sendFormCaptureRequest=function(t,e){if(t&&t.form&&Object.keys(t.form).length)if(s.log("INFO: Preparing form data to send to callrail.","ExternalForms"),t&&t.form&&Object.keys(t.form).length){s.log("INFO: Preparing form data to send to callrail.","ExternalForms");var n=this.context.get("formUrl").replace(/\.js$/,".json");e||(t=g(g({},t),this.sessionParams)),this.ls.setItem("calltrk_form_data",JSON.stringify(t)),this.http.post(n,t,this.submitCallback,this.submitCallback,{"Content-Type":"text/plain",Accept:"application/json"})}else s.log("WARN: The form is really empty or the parser was not able to analyse the data correctly.","ExternalForms");else s.log("WARN: The form is really empty or the parser was not able to analyse the data correctly.","ExternalForms")},Object.defineProperty(t.prototype,"sessionParams",{get:function(){return{session_uuid:this.context.get("sessionId"),fcid:this.context.get("formCaptureCookie"),uuid:CallTrkSwap.generateUUID(),timestamp:String((new Date).getTime()),url:this.context.get("url"),landing:this.context.get("landing"),referrer_url:this.context.get("referrerUrl"),referrer:this.context.get("referrer")}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"submitCallback",{get:function(){var t=this;return function(e){e&&0!==e.status&&t.ls.removeItem("calltrk_form_data")}},enumerable:!1,configurable:!0}),t}(),v=function(){function t(){this.buttonSelectors={weebly:"a.wsite-button",wpcf7:".wpcf7-submit",formmaker:"button.button-submit",cognito:"button.c-button",inputButtonForm:'input[type="button"]',buttonForm:"button",ninjaforms:'input[type="button"].ninja-forms-field',elementor:'button[type="submit"][class*="elementor"]',drupal:'[data-drupal-selector="edit-submit"]',standard:'[type="submit"]'}}return t.prototype.setEventListeners=function(t,e){var n=new b,r="ninjaforms"===e;this.setClickOrEnterCallback(t,this.buttonSelectors[e],n,r),this.setSubmitCallback(t,n)},t.prototype.setSubmitCallback=function(t,e){t.addEventListener("submit",function(){e.submitForm(t)}),this.logEventListenerType("clickOrEnter",t)},t.prototype.setClickOrEnterCallback=function(t,e,n,r){if(void 0===r&&(r=!1),r)t.addEventListener("click",function(e){"button"===e.target.type&&n.submitForm(t)});else{var o=t.querySelector(e);if(!o)return void this.logEventListenerFailure(e,t);o.addEventListener("click",function(){n.submitForm(t)})}t.addEventListener("onkeyup",function(e){e&&13===e.keyCode&&n.submitForm(t)}),this.logEventListenerType("clickOrEnter",t)},t.prototype.logEventListenerFailure=function(t,e){s.log("Failed to add event listener on ".concat(t," selector in form ").concat(this.formName(e)))},t.prototype.logEventListenerType=function(t,e){s.log("Adding ".concat(t," event listener on form ").concat(this.formName(e)))},t.prototype.formName=function(t){return t.getAttribute("id")||t.getAttribute("class")},t}(),w=new RegExp(/(^cc$)|(^cvc$)|(card([_-]?)num)|(credit([_-]?)card)|(cc([_-]?)num)/i),C=new RegExp(/(credit card)|(card number)/i),E=function(){function t(){}return t.prototype.hasCreditCardInput=function(t){return this._hasCCInput(t)||this._hasCCLabel(t)},Object.defineProperty(t.prototype,"hasCreditCardMsg",{get:function(){return"has input that should not be captured"},enumerable:!1,configurable:!0}),t.prototype.hasPasswordInput=function(t){return null!==t.querySelector("input[type=password]")},Object.defineProperty(t.prototype,"hasPasswordMsg",{get:function(){return"has password field"},enumerable:!1,configurable:!0}),t.prototype.hasSubmitButton=function(t){return!!t.querySelector('button[type="submit"]')||!!t.querySelector('input[type="submit"]')},t.prototype._hasCCLabel=function(t){return Array.from(t.querySelectorAll("label")).map(function(t){return t.innerText||t.textContent}).some(function(t){return C.test(t)})},t.prototype._hasCCInput=function(t){return Array.from(t.querySelectorAll("input")).map(function(t){return t.name}).some(function(t){return w.test(t)})},t}(),k=function(){function t(){this.debugMode=!1,this.debugMode=CallTrkSwap._isDebug,this.context=c.getInstance()}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.appendDebugInfo=function(t){if(this.debugMode){var e=t.nativeElement;e.setAttribute("style","position: relative");var n=this.formDetails(t),r=!!e.getAttribute("cr-attached"),o=this.attachedIndicator(r);e.appendChild(o),o.addEventListener("mouseenter",function(){e.appendChild(n)}),n.addEventListener("mouseleave",function(){e.removeChild(n)})}},t.prototype.attachedIndicator=function(t){var e=document.createElement("div"),n="position: absolute; top: 0; left: 0; height: 24px; width: 24px; border-radius: 50%;text-align: center; color: #ffffff; cursor: pointer;";return t?(e.setAttribute("style",n+"background-color: #30b967"),e.setAttribute("title","Attached")):(e.setAttribute("style",n+"background-color: #d73330"),e.setAttribute("title","Form identified but not attached")),e},t.prototype.formDetails=function(t){var e=document.createElement("div");e.setAttribute("style","background-color: #ffffff; min-height: 200px; min-width: 300px; position: absolute; top: 0;border-radius: 4px; padding: 16px; font-size: 16px; font-family: sans-serif;box-shadow: 0 1px 8px rgba(0,0,0,.2);");var n=[["Form Type",t.formType],["Capturable",!!this.eventListenerType(t)],["Event Listener Type",this.eventListenerType(t)],["Company ID",this.context.get("swapConfigId")],["Multiswap","".concat(this.context.get("multiswap"))]];return e.innerHTML=n.map(function(t,e){var n="display: flex; justify-content: space-between; padding: 6px 0;";return e>0&&(n+="border-top: 1px solid #eaedf1;"),'<div style="'.concat(n,'"><b>').concat(t[0],":</b><div>").concat(t[1],"</div></div>")}).join(""),e},t.prototype.eventListenerType=function(t){return"standard"===t.formType?"Submit":"Click or Enter"},t}(),x=function(){function t(t,e){this.nativeElement=t,this.eventListeners=e,this.inputElemValidators=new E,this.id=this.nativeElement.getAttribute("id"),this.class=this.nativeElement.getAttribute("class")||"",this.formDebugger=k.getInstance()}return t.prototype.shouldAttach=function(){return s.log("form #'".concat(this.id||"<none>",".").concat(this.class||"")),this.attached?(s.log("already attached"),!1):this.onBlacklistedUrl?(s.log("form on a page with a url that we have globally blacklisted"),!1):this.excluded?(s.log("opted out"),!1):this.inputElemValidators.hasCreditCardInput(this.nativeElement)?(s.log(this.inputElemValidators.hasCreditCardMsg),!1):this.inputElemValidators.hasPasswordInput(this.nativeElement)?(s.log(this.inputElemValidators.hasPasswordMsg),!1):(s.log("shouldAttach returning true for form whose id is ".concat(this.id)),!0)},t.prototype.attach=function(t){void 0===t&&(t=!1),this.attached||(this.attachListener(),this.nativeElement.setAttribute("cr-attached","true"),t&&this.nativeElement.setAttribute("cr-form-attach-retry","true"),this.formDebugger.appendDebugInfo(this))},Object.defineProperty(t.prototype,"attached",{get:function(){return"true"===this.nativeElement.getAttribute("cr-attached")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"excluded",{get:function(){return null!=this.nativeElement.getAttribute("data-cr-no-capture")},enumerable:!1,configurable:!0}),t.prototype.attachListener=function(){this.eventListeners.setEventListeners(this.nativeElement,this.formType)},Object.defineProperty(t.prototype,"formType",{get:function(){return void 0!==window.nfRadio&&this.nativeElement.querySelector("nf-field")?this.nativeElement.querySelector('input[type="button"]')?"ninjaforms":"standard":this.nativeElement.querySelector("button.button-submit")&&this.class.includes("fm-form")?"formmaker":this.nativeElement.querySelector("a.wsite-button")?"weebly":this.nativeElement.querySelector("input[class*=elementor]")?"elementor":this.nativeElement.querySelector('[data-drupal-selector="edit-submit"]')?"drupal":this.class.includes("wpcf7")?"wpcf7":void 0!==window.Cognito&&this.nativeElement.querySelector("div.c-forms-form")?"cognito":this.nativeElement.querySelector('input[type="button"]')&&!this.inputElemValidators.hasSubmitButton(this.nativeElement)?"inputButtonForm":this.nativeElement.querySelector("button")&&!this.inputElemValidators.hasSubmitButton(this.nativeElement)?"buttonForm":"standard"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBlacklistedUrl",{get:function(){var t=window.location.href.toLowerCase();return!!["login","password","unsubscribe"].some(function(e){return t.includes(e)})},enumerable:!1,configurable:!0}),t}(),S=function(){function t(t,e,n){this.dom=t,this.eventListeners=e,this.win=n,this.win=n||window,this.findForms()}return t.prototype.attachForms=function(t){void 0===t&&(t=!1),t&&this.findForms(),this.forms.forEach(function(e){e.shouldAttach()&&e.attach(t)})},t.prototype.findForms=function(){var t=this,e=Array.from(this.dom.getAll("form"));this.forms=e.map(function(e){return new x(e,t.eventListeners)})},t}(),N=function(){function t(t,e,n){this.swappy=t,this.doc=e,this.win=n,this.doc=e||document,this.win=n||window}return t.prototype.onMutation=function(t){this.shouldCheckForMutations()&&(this.mutationObserver=new MutationObserver(t),this.mutationObserver.observe(this.doc.body,{childList:!0,subtree:!0}))},t.prototype.shouldCheckForMutations=function(){var t=String(this.win.location.href),e=this.swappy.firstNamespace.mutation_observer,n=t.includes("cr-no-mutation"),r=t.includes("cr-do-mutation");return e&&!n||r},t}(),T=function(){function t(t,e,n,r,o,i,a){this.swappy=t,this.formActions=e,this.formsMutationObserver=n,this.sessionData=r,this.win=o,this.ls=i,this.submitHandler=a,this.win=o||window,this.ls=i||localStorage,this.submitHandler=a||new b,this.context=c.getInstance(),this.formCaptureConfig=this.swappy.firstNamespace.form_capture_config}return t.prototype.init=function(){this.shouldCapture()&&(this.context=c.getInstance(),this.watchForMutations(),this.setContext(),this.formActions.attachForms(),this.setManualCaptureMethod(),this.checkLocalStorageFormData())},t.prototype.setContext=function(){var t=this.sessionData.landing(),e=this.sessionData.referrer();this.context.set("formUrl",this.formCaptureUrl),this.context.set("sessionId",this.swappy.sessionId),this.context.set("formCaptureCookie",this.swappy.callTrkSwap.getFormCaptureCookie()),this.context.set("landing",t),this.context.set("referrerUrl",e),this.context.set("referrer",this.swappy.callTrkSwap.getReferrerKey(e,t)),this.context.set("url",this.win.location.toString()),this.context.set("swapConfigId",this.namesSpaceToUse().id),this.context.set("multiswap",this.swappy.callTrkSwap.isMulti())},Object.defineProperty(t.prototype,"formCaptureUrl",{get:function(){var t=this.namesSpaceToUse();return this.swappy.firstNamespace.buildURL("form_capture",{access_token:t.access_key,company_id:String(t.id),version:"12",host:t.swap_session_host})},enumerable:!1,configurable:!0}),t.prototype.watchForMutations=function(){var t=this;this.formsMutationObserver.onMutation(function(){t.formActions.attachForms(!0)})},t.prototype.shouldCapture=function(){var t=this;if(this.swappy.callTrkSwap.isMulti()&&!this.matchMultiSwapNamespace())return s.log("No Multiswap domain match; not capturing"),!1;if(!this.shouldCaptureSource())return s.log("Source does not match; not capturing."),!1;if(!this.formCaptureConfig.url_scope||"all"===this.formCaptureConfig.url_scope)return s.log("Capture all pages; capturing."),!0;var e=(this.win.location.host+this.win.location.pathname).replace(/\/$/,""),n=this.formCaptureConfig.urls.some(function(n){return e.match(t.regexUrl(n))});return this.checkExclusionRules(n)},t.prototype.shouldCaptureSource=function(){var t=this.formCaptureConfig.source;if(!t)return!0;var e=this.swappy.callTrkSwap.getReferrerKey(this.sessionData.referrer(),this.sessionData.landing());switch(t){case"ppc":return["google_paid","yahoo_paid","bing_paid"].includes(e);case"google_ads":return["google_paid"].includes(e)}},t.prototype.checkExclusionRules=function(t){var e="exclude"===this.formCaptureConfig.url_scope;return t&&e?(s.log("url blacklisted, not capturing"),!1):t&&!e?(s.log("url whitelisted, capturing"),!0):!t&&e?(s.log("url not blacklisted, capturing"),!0):t||e?void 0:(s.log("url not whitelisted, not capturing"),!1)},t.prototype.namesSpaceToUse=function(){return this.swappy.callTrkSwap.isMulti()&&this.matchMultiSwapNamespace()||this.swappy.firstNamespace},t.prototype.matchMultiSwapNamespace=function(){for(var t=this.swappy.callTrk._namespaceObjs,e=0,n=this.swappy.callTrk._namespaces||[];e<n.length;e++){var r=n[e];if(t[r]&&t[r].form_capture_config&&this.win.location.href.includes(t[r].form_capture_config.multiswap_company_domain))return t[r]}},t.prototype.setManualCaptureMethod=function(){var t=this;this.win.CallTrk.captureForm=function(e){"string"==typeof e&&(e=document.querySelector(e)),t.submitHandler.submitForm(e)}},t.prototype.checkLocalStorageFormData=function(){if(this.ls.getItem("calltrk_form_data")){var t=JSON.parse(this.ls.getItem("calltrk_form_data")),e=t.timestamp;(new Date).getTime()-e<36e5?this.submitHandler.sendFormCaptureRequest(t,!0):this.ls.removeItem("calltrk_form_data")}},t.prototype.regexUrl=function(t){return t=(t=(t=t.replace(/\/$/,"").replace(/^h?t?t?p?s?:?\/\//,"")).replace(/\/\*/,"*")).includes("*")?t.replace(/\*/g,".*"):"^".concat(t,"$"),new RegExp(t)},t}();(new(function(){function n(){}return n.prototype.init=function(){var n=new t,i=new v,a=new o,s=new r,u=new e(s);new T(a,new S(n,i),new N(a),u).init()},n}())).init()}()}();